<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Creating a New StartUp Catalog</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>PPR Hub</h1>
    </td>
    <td valign="top">
      <h2>Product Modeler</h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>Creating a New StartUp Catalog</h3>
      <em>Defining new StartUps in a catalog</em></td>
  </tr>
  <tr>
    <td class="use" colspan="2">Use Case</td>
  </tr>
  <tr>
    <td valign="top" colspan="3"><a href="CAAPstIntegrateNewFeatures.htm">CAAPstIntegrateNewFeatures</a>
      &gt; <b>CAAPstINFBuildCatalog</b> &gt; <a href="CAAPstINFCreateDocument.htm">CAAPstINFCreateDocument</a>
      &gt; <a href="CAAPstINFInitCont.htm">CAAPstINFInitCont </a>&gt; <a href="CAAPstINFNavigate.htm">CAAPstINFNavigate</a>
      &gt; <a href="CAAPstINFVisu.htm">CAAPstINFVisu</a> &gt; <a href="CAAPstINFGraphicalProperties.htm">CAAPstINFGraphicalProperties</a>&nbsp;
      &gt; CAAPstINFEdit &gt; <a href="CAAPstINFCCP.htm">CAAPstINFCCP</a> &gt; <a href="CAAPstINFDelete.htm">CAAPstINFDelete</a>
      &gt; <a href="CAAPstINFUpdate.htm">CAAPstINFUpdate</a></td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td>
      <h3>Abstract</h3>
      <p>This article discusses the CAAPstINFBuildCatalog use case which is part
      of the CAAPstIntegrateNewFeatures use case. It explains how to create new
      StartUps in a new feature catalog.&nbsp;
      <ul>
        <li><strong><a href="#Learn">What You Will Learn With This Use Case</a></strong></li>
        <li><a href="#UseCase"><strong>The CAAPstINFBuildCatalog Use Case</strong></a>
          <ul>
            <li><a href="#What">What Does CAAPstINFBuildCatalog Do</a></li>
            <li><a href="#Launch">How to Launch CAAPstINFBuildCatalog</a></li>
            <li><a href="#Where">Where to Find the CAAPstINFBuildCatalog Code</a></li>
          </ul>
        </li>
        <li><strong><a href="#StepByStep">Step-by-Step</a></strong></li>
        <li><strong><a href="#InShort">In Short</a></strong></li>
        <li><strong><a href="#References">References</a></strong></li>
      </ul>
    </td>
  </tr>
</table>
<hr>

<!---------------------------------comment------------------------------------->

<!---------------------------------comment------------------------------------->
<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
<p>This use case is intended to illustrate how to create new feature StartUps in
a new feature catalog. These StartUps are actually feature definitions, or
prototypes, that are then retrieved in a working document and instantiated as
features. These particular StartUps are generally used in the
CAAPstIntegrateNewFeatures use case modules in order to demonstrate integrating
new features in the basic CATIA mechanisms within a Product document. You should
already be familiar with the CAAPstIntegrateNewFeatures use case article [<a href="#References">1</a>]
in order to more easily understand the context of this use case.
<p align="right">[<a href="#Top">Top</a>]
<!---------------------------------comment------------------------------------->
<!---------------------------------comment------------------------------------->
<h3><a name="UseCase"></a>The CAAPstINFBuildCatalog Use Case</h3>
<p>The CAAPstINFBuildCatalog is a use case that is part of the
CAAPstIntegrateNewFeatures use case defined in the CAAProductStructure.edu
framework that illustrates the integration of ObjectSpecsModeler framework
capabilities.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="What"></a>What Does the CAAPstINFBuildCatalog Use Case Do</h4>
<p>This use case illustrates creating new StartUps&nbsp; in a feature catalog.
The StartUps are created &quot;from scratch&quot;, i.e., they do not derive from
any existing StartUps and do not, therefore, inherit any data or behaviors at
all.&nbsp;</p>
<p>Here is an image of the contents of the feature catalog containing the
&quot;StartUps&quot; that will be created in this use case:</p>
<b>Fig 1: Contents of the CAAPstINFCatalog.CATfct file</b>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td width="100%"><img border="0" src="images/CAAPstINFCatalog.jpg" width="336" height="296"></td>
  </tr>
</table>
<ul>
  <li>&quot;CAAPstINFRoot&quot; represents the parent node that will aggregate
    all the other features. Its unique attribute contains a list of components,
    in other words, a list of the features that it aggregates.</li>
  <li>&quot;CAAPstINFPoint&quot; is a feature representing a 3D geometrical
    point. Its attributes contain the values of the x, y and z coordinates of
    the point.</li>
  <li>&quot;CAAPstINFLine&quot; is a feature representing a 3D geometrical line.
    Its attributes contain references to the two points of type
    &quot;CAAPstINFPoint&quot; that define the line.</li>
  <li>&quot;CAAPstINFWire&quot; is a feature representing one or several
    inter-connected 3D geometrical lines. Its attribute contains a list of at
    least two &quot;CAAPstINFPoint&quot; features that define the wire.</li>
</ul>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<!---------------------------------comment------------------------------------->
<h4><a name="Launch"></a>How to Launch the CAAPstINFBuildCatalog Use Case</h4>
<p>See the section entitled &quot;How to Launch the CAAPstIntegrateNewFeatures
Use Case&quot; in the &quot;<a href="CAAPstIntegrateNewFeatures.htm">Integrating
New Features in a Product Structure</a>&quot; use case for a detailed
description of how this use case should be launched.</p>
<p>The particular part of the use case described in this article is launched by
executing the following command:</p>
<pre>    mkrun -c &quot;CAAPstINFBuildCatalog CatalogStorageName&quot;</pre>
where <code>CatalogStorageName</code> is the entire pathname, name and <code>.CATfct</code>
suffix of the catalog to be created. It is recommended that the new catalog be
stored in the CNext + resources + graphic directory of the current framework;
then, by updating the runtime view, the catalog will be moved to the runtime
directory and will be accessible by subsequent programs. This batch program
creates new StartUps in a new catalog. A catalog called
&quot;CAAPstINFCatalog.CATfct&quot; has also, however, been supplied with this
use case, so be sure that the name of the catalog you specify here is unique in
its directory, otherwise, your new catalog will not be able to be saved.
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Where"></a>Where to Find the CAAPstINFBuildCatalog Code</h4>
<p>The CAAPstINFBuildCatalog use case is made of one module,
CAAPstINFBuildCatalog.m,&nbsp; found in the the CAAProductStructure.edu
framework and containing a single source program, CAAPstINFCatalog.cpp:</p>
<table>
  <tbody>
    <tr>
      <td>Windows</td>
      <td><code>InstallRootDirectory\CAAProductStructure.edu\CAAPstINFBuildCatalog.m</code></td>
    </tr>
    <tr>
      <td>Unix</td>
      <td><code>InstallRootDirectory/CAAProductStructure.edu/CAAPstINFBuildCatalog.m</code></td>
    </tr>
  </tbody>
</table>
<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM
is installed.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<h3><a name="StepByStep"></a>Step-by-Step</h3>
<p>There are four logical steps in CAAPstINFBuildCatalog:</p>
<ol>
  <li><a href="#CreateCatalog">Creating the Feature Catalog</a></li>
  <li><a href="#CreateSU">Creating StartUps in the Feature Catalog</a></li>
  <li><a href="#AddAttr">Adding Attributes to StartUps</a></li>
  <li><a href="#SaveCatalog">Saving the Feature Catalog</a>
</ol>
<p>We will now comment each of these sections by looking at the code.&nbsp;</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="left"><a name="CreateCatalog"></a><b>Creating the Feature Catalog</b></p>
<table class="code">
  <tr>
    <td>
      <pre>...
CATICatalog *piCatalog = NULL;
CATUnicodeString storageName = argv[1];
rc = ::<b>CreateCatalog</b>(&amp;storageName, 
                     &amp;piCatalog);
...
// Add a client identification to the catalog.  This is a mandatory step. 
CATUnicodeString clientId(&quot;CAAPstINFClientId&quot;);
rc = piCatalog -&gt; <b>SetClientId</b>(&amp;clientId);
...   </pre>
    </td>
  </tr>
</table>
<p align="left">Use the <code>CreateCatalog</code> global function to create a
new feature catalog. The arguments of this function are:</p>
<ul>
  <li>
    <p align="left"><b>storageName</b> - this is the entire pathname and name of
    the catalog, passed as an argument to the use case. This parameter is the
    same as the one passed to the method that saves the catalog.</li>
  <li>
    <p align="left"><b>piCatalog</b> - this is the returned <i>CATICatalog</i>
    pointer to the new catalog that has been created.</li>
</ul>
<p align="left">In order to protect your catalog from unwanted access, you must
also assign a client ID to it. This ID is needed in order to open the catalog to
retrieve StartUps from it. The client ID is set using the <code>SetClientId</code>
method of <i>CATICatalog</i> and passing a <i>CATUnicodeString</i> parameter
representing the client ID.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="left"><a name="CreateSU"></a><b>Creating StartUps in the Feature
Catalog</b></p>
<table class="code">
  <tr>
    <td>
      <pre>...
CATBaseUnknown *pRootSU = NULL;
CATUnicodeString rootSUName(&quot;CAAPstINFRoot&quot;);
CATUnicodeString rootSUType(&quot;CAAPstINFRoot&quot;);
rc = piCatalog -&gt; <b>CreateSUInCatalog</b> (&amp;pRootSU,
                                     &amp;rootSUName,
 	     	                     &amp;rootSUType,
				     &quot;CATISpecObject&quot;);
...

// Get a CATISpecObject handle on the CAAPstINFRoot StartUp

<b>CATISpecObject *piRootSU = (CATISpecObject*) pRootSU;</b>
...   </pre>
    </td>
  </tr>
</table>
<p align="left">A new StartUp is created using the <code>CreateSUInCatalog</code>
method of <i>CATICatalog</i>. This method takes the following arguments:</p>
<ul>
  <li>
    <p align="left"><b>pRootSU</b> - this is the returned StartUp that is
    created in the catalog.</li>
  <li>
    <p align="left"><b>rootSUName</b> - this is the name of the new StartUp to
    be created.</li>
  <li>
    <p align="left"><b>rootSUType</b> - this is the type of the new StartUp to
    be created.</li>
  <li>
    <p align="left"><b>&quot;CATISpecObject&quot;</b> - this is the interface
    that will support this StartUp.</li>
</ul>
<p align="left">Once the StartUp has been created, the retrieved <i>CATBaseUnknown</i>
pointer to it can directly be cast to a pointer of the requested interface.</p>
<p align="left">The above code example shows you how the
&quot;CAAPstINFRoot&quot; StartUp is created. The other three StartUps,
&quot;CAAPstINFPoint&quot;, &quot;CAAPstINFLine&quot; and
&quot;CAAPstINFWire&quot; are created in exactly the same way.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="left"><a name="AddAttr"></a><b>Adding Attributes to StartUps</b></p>
<table class="code">
  <tr>
    <td>
      <pre>...
CATUnicodeString listComp(&quot;ListOfComponents&quot;);
CATISpecAttribute *piListComp = piRootSU -&gt; <b>AddAttribute</b>(listComp,
                                                         tk_list(tk_component),
                                                         sp_IN);
...   </pre>
    </td>
  </tr>
</table>
<p align="left">A new attribute of a StartUp is created using the <code>AddAttribute</code>
method of <i>CATISpecObject</i>. This method takes the following arguments:</p>
<ul>
  <li>
    <p align="left"><b>listComp</b> - this argument is a <i>CATUnicodeString</i>
    variable representing the name of the new attribute.</li>
  <li>
    <p align="left"><b>tk_list(tk_component) </b>- this is the type of attribute
    to be added. In this case, the attribute will contain a list of tk_component
    type objects, in other words, aggregated features.</li>
  <li>
    <p align="left"><b>sp_IN</b> - this is the &quot;quality&quot; of the
    attribute: it is used during the Update process to determine whether this
    feature is to be re-built or not.</li>
</ul>
<p align="left">The attributes of the other StartUps are added the same way,
except that they are of type <b><code>tk_double</code></b> in the case of the
&quot;CAAPstINFPoint&quot; feature, <b><code>tk_specobject</code></b> in the
case of the &quot;CAAPstINFLine&quot; feature and <b><code>tk_list(tk_specobject)</code></b>
in the case of the &quot;CAAPstINFWire&quot; feature.</p>
<p align="left">Remember to release the <i>CATISpecAttribute</i> pointer
returned by this method. Also, remember to release the <i>CATBaseUnknown</i>
pointer to the StartUp when it is no longer needed.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="left"><a name="SaveCatalog"></a><b>Saving the Feature Catalog</b></p>
<table class="code">
  <tr>
    <td>
      <pre>...
rc = ::<b>SaveCatalog</b>(&amp;piCatalog,
		   &amp;storageName);
...   </pre>
    </td>
  </tr>
</table>
<p align="left">The new feature catalog is saved using the <code>SaveCatalog</code>
global function which takes the following arguments:</p>
<ul>
  <li>
    <p align="left"><b>piCatalog</b> - this is the <i>CATICatalog</i> pointer to
    the new catalog that was created previously.</li>
  <li>
    <p align="left"><b>storageName</b> - this is the pathname and name where the
    new catalog is to be stored. This parameter must correspond to the one
    indicated for the <code>CreateCatalog</code> method.</li>
</ul>
<p align="left">Remember to release the <i>CATICatalog</i> pointer as it will no
longer be needed.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>The CAAPstINFBuildCatalog use case has shown you how to create a new feature
catalog using the <code>CreateCatalog</code> global function, how to create new
StartUps using the <i>CATICatalog</i>::<code>CreateSUInCatalog</code> method,
how to add new attributes to a StartUp using the <i>CATISpecObject</i>::<code>AddAttribute</code>
method and how to save the new catalog using the <code>SaveCatalog</code> global
function.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="References"></a>References</h3>
<table width="100%">
  <tbody>
    <tr>
      <td valign="top">[1]</td>
      <td><a href="CAAPstIntegrateNewFeatures.htm">Integrating New Features in a
        Product Document</a></td>
    </tr>
    <tr>
      <td valign="top"></td>
      <td></td>
    </tr>
    <tr>
      <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
    </tr>
  </tbody>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="History"></a>History</h3>
<table width="100%">
  <tbody>
    <tr>
      <td valign="top"><b><span style="font-weight: 400">Version: </span></b> <strong>
      <span style="font-weight: 400">1.1</span></strong><b><span style="font-weight: 400"> [Aug 2004]</span></b></td>
      <td valign="top">Document revised</td>
    </tr>
    <tr>
      <td valign="top"><b><span style="font-weight: 400">Version: </span></b> <strong>
      <span style="font-weight: 400">1</span></strong><b><span style="font-weight: 400"> [May 2002]</span></b></td>
      <td valign="top">Document created</td>
    </tr>
    <tr>
      <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
    </tr>
  </tbody>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2002, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>
