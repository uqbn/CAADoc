<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<script language="JavaScript" src="../CAADocJavaScript/submit.js"></script>
<title>A Description of Update Errors</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>Mechanical Modeler</h1>
    </td>
    <td valign="top">
      <h2></h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>A Description of Update Errors</h3>
      <em>Using CATIUpdateError and CATMfErrUpdate</em></td>
  </tr>
  <tr>
    <td class="tech" colspan="2">Technical Article</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td>
      <h3>Abstract</h3>
      <p>The aim of this article is to explain the errors generated by the
      Update mechanism [<a href="#References">1</a>] on mechanical features. It is included in a set of
      articles which describe the Mechanical Modeler and which are&nbsp; presented in
      the &quot;Mechanical Modeler Overview&quot; [<a href="#References">2</a>]
      article.</p>
      <ul>
        
            <li><strong><a href="#What is an Update Error">What is an Update Error ?</a></strong></li>
            <li><strong><a href="#CATIUpdateError">CATIUpdateError</a></strong></li>
            <li><strong><a href="#CATMfErrUpdate">CATMfErrUpdate</a></strong>
              <ul>
                <li><a href="#retrieve the sick features"><b>Retrieving the Sick Features</b></a></li>
                <li><a href="#retrieve the NLS messages Error"><b>Retrieving the
                  NLS Error Messages</b></a></li>
                <li><a href="#Cyclicite Error"><b>Cyclical Errors</b></a></li>
              </ul>
            </li>
            <li><strong><a href="#Error propagation">Error Propagation</a></strong></li>
        
        <li><strong><a href="#InShort">In Short</a></strong></li>
        <li><strong><a href="#References">References</a></strong></li>
      </ul>
    </td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="What is an Update Error"></a>What is an Update Error ?</h3>
<p>During the update of a mechanical feature [<a href="#References">3</a>]
[<a href="#References">4</a>] an error can occur. This error is an Update error which has blocked the construction of the
geometry. The end-user can correct the error by modifying one or several parameters of the feature. The error is associated with the
feature during the generation of its result, in other words in the <code>Build</code> 
method of the <i>CATIBuild </i>[<a href="#References">5</a>] interface <i> </i>.&nbsp;</p>
<p>Let's take the simple example of an EdgeFillet feature. If its radius is too
big,
the Update generates an error and the following dialog box appears [<a href="#Fig.1">Fig.1</a>].&nbsp;</p>
<table border="0">
 <caption><i><a name="Fig.1">Fig.1</a>:Update Error on Edge Fillet</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrErrorFillet.jpg" width="564" height="378"></td>
  </tr>
</table>
<p>This dialog box displays the error diagnosis in the column of same
name, and it is described in more detail at the bottom of the panel. It is possible to edit the wrong feature to correct the error. In the next
section, you will see how to retrieve this diagnosis and get other information
about the error.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<h3><a name="CATIUpdateError"></a><i>CATIUpdateError&nbsp;</i></h3>
<p>To analyze the error whether in batch mode or in an interactive session, you should use
the <i>CATIUpdateError </i>(MechanicalModeler) interface. The methods to use
are the following and in this order:</p>
<ul>
  <li><i><b>TestExistingUpdateError</b></i></li>
  <p>This is the first method to call to determine if the feature has an update
  error or not. This method reads an attribute stored in the model.</p>
  <li><b><i>GetUpdateError</i> / <i> GetFullDiagnostic</i></b></li>
  <p>You should use these two methods once the feature has been updated. In
  batch mode, as long as the feature has not yet been updated, the first method will
  return a NULL pointer and the second an invalid string.</p>
  <p>The <i>GetUpdateError</i>   returns an instance of the <i><a href="#CATMfErrUpdate">CATMfErrUpdate</a></i>
  error class. This class enables you to analyze the error, as described in the
  next section.</p>
  <p>The <i>GetFullDiagnostic</i>&nbsp;is the same method as the one having the same name in the <i>CATMfErrUpdate</i> class.</p>
</ul>
<p>The <i>CATIUpdateError</i>&nbsp; interface has other methods, but they are
useful only for the <i> CATIBuild</i> [<a href="#References">5</a>]
implementation.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<h3><i><a name="CATMfErrUpdate"></a>   CATMfErrUpdate</i></h3>

<p>This class is instantiated in the <code>Build</code> method of the <i> CATIBuild</i> 
or <i> CATIBuildShape</i>  interface. It enables you to transmit information about the error.</p>

  <h4><a name="retrieve the sick features"></a>Retrieve the Sick Features</h4>

<p>The sick features are the features at the root of the error. Take a look at
the next example to help you</p>
 <table border="0">
 <caption><i><a name="Fig.2">Fig.2</a>: Pad Feature</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrUpdateErrorPadFillete.jpg" width="214" height="151"></td>
    <td><img border="0" src="images/CAAMmrUpdateErrorBrokenEdge.jpg" width="221" height="150"></td>
  </tr>
</table>

<p>At the first of all there is a Pad with a fillet set on two edges (left picture).
Next, the
Sketch is edited to replace the support edge of the fillet by a broken edge (right picture).
When exiting the Sketcher editor, the following dialog box [<a href="#Fig.3">Fig. 3</a>] appears to notify
you of an
update error on the <code> EdgeFillet.1</code> feature.</p>

     <table border="0">
 <caption><i><a name="Fig.3">Fig.3</a>: Sick Feature</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrErrorSickFeature.jpg" width="547" height="419"></td>
  </tr>
</table>
<p>The dialog box displays the <code>Edge.1</code>  feature that you need to
edit to modify. <code>Edge.1</code> is a sick feature for the <code>EdgeFilllet.1</code>
feature. By editing the <code>Edge.1</code> feature, the error can be corrected.</p>

<p>For a single error several sick features may be involved. The <i> CATMfErrUpdate</i> 
class has three methods that can be used to retrieve these sick features:</p>

  <ul>
    <li> <code>GetSickFeatures</code>: retrieves the sick features directly associated
      with the error&nbsp;</li>
    <li><code>GetAllSickFeatures</code>: retrieves recursively all the sick
      features: the sick feature can itself be involved in an error which sick features. All these sick features are
      linked together by the errors.</li>
    <li><code>GetDeepSickFeatures</code>: retrieves only the last sick features
      of the chain. Those which are displayed in the &quot;Update Diagnosis&quot; [<a href="#Fig.3">Fig.3]</a>
      dialog box and which appear intended.&nbsp;</li>
  </ul>
<p>The next figure [<a href="#Fig.4">Fig.4</a>]&nbsp; illustrates
these three methods:&nbsp;</p>
     <table border="0">
 <caption><i><a name="Fig.4">Fig.4</a>: Chained Sick Features</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrErrorChaine.jpg" width="539" height="361"></td>
  </tr>
</table>
<p>In this example, <code>Error1</code>  has two sick features: <code> feature2</code>
and <code>feature3</code>, while <code>Error3</code>  <code>,</code>
associated with <code>feature3, </code>has <code>feature4</code> as a sick
feature. <code>Error4,</code> associated with <code>feature4</code>,
has itself the <code>feature5 </code>as a sick feature.</p>
  <ul>
    <li><code>GetSickFeatures</code> on <code>Error1</code> returns: <code> feature2</code>
      and <code>feature3</code></li>
    <li><code>GetAllSickFeatures</code>  on <code>Error1</code> returns: <code>feature2</code>,
      <code>feature3,</code> <code>feature4 </code>and <code>feature5</code></li>
    <li><code>GetDeepSickFeatures</code>  on <code>Error1</code> returns: <code>feature5</code>,
      the sick feature farthest down in the chain</li>
  </ul>
<h4><a name="retrieve the NLS messages Error"></a>Retrieve the NLS Error
Messages&nbsp;</h4>

<p>The following set of methods can be used:</p>
    <ul>
    <li><code>GetDiagnostic</code>: This method returns the NLS error message of the
      feature, the one that appears in the &quot;Update Diagnosis&quot; [<a href="#Fig.3">Fig.3]</a>
      dialog box.</li>
    <li><code>GetFullDiagnostic</code>:This method returns the concatenation of the NLS error
      messages of all the sick features (those returned by <code>GetAllSickFeatures</code>)&nbsp;</li>
    </ul>
      
<h4><a name="Cyclicite Error"></a>Cyclical Errors</h4>
<p>Let's take a look at the following example in order to understand the
cyclical errors. First we have a
PartBody with three Pads: <code>Pad.2</code> created on the upper face of <code>Pad.1</code>
and <code>Pad.3</code> created on the upper face of <code>Pad.2</code> [<a href="#Fig.5">Fig.5</a>].
Next, <code>Pad.1</code> is moved to be placed after <code>Pad.3</code>. [<a href="#Fig.6">Fig.6.</a>] </p>
     <table border="0">
 <caption><i><a name="Fig.5">Fig.5</a>: Pads</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrUpdateErrorPadEmpiles.jpg" width="406" height="237"></td>
  </tr>
</table>
      <table border="0">
 <caption><i><a name="Fig.6">Fig.6</a>:Cyclicite Error</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrErrorCycle.jpg" width="540" height="426"></td>
  </tr>
</table>
<p></p>
    <p align="right">[<a href="#Top">Top</a>]</p>
<h3><a name="Error propagation"></a>Error Propagation</h3>
<p>With the Dassault Systemes features, the error propagation
follows the update path. Here are two examples that illustrate this: the first for the
solid and surfacic features set update (Body/PartBody) [<a href="#Fig.7">Fig.7</a>] and the
second for the surfacic features set&nbsp; case (OGS/GS) [<a href="#Fig.8">Fig.8</a>].</p>
<table border="0">
  <caption><i><a name="Fig.7">Fig.7</a>: </i>Solid and Surfacic Features Set <i> Update</i></caption>

  <tr>
    <td><img border="0" src="images/CAAMmrErrorProp1.jpg" width="536" height="283"></td>
  </tr>
</table>
<p>In this example, you can notice that the error is propaged from the <code>EdgeFillet</code>&nbsp;
to its aggregating feature, the PartBody, as well as to the Part. The Part update
implies the <code>PartBody</code>
update and the <code>EdgeFillet</code> update.</p>
<table border="0">
  <caption><i><a name="Fig.8">Fig.8</a>: Surfacic Features Set Update</i></caption>

  <tr>
    <td width="100%"><img border="0" src="images/CAAMmrErrorProp2.jpg"></td>
  </tr>
</table>

<p>In the surfacic example above, the error propagation is clearly not the same
as the path of the aggregation. The <code>Point.1</code> feature has an update error,
but <code>GeomSet.1,</code>  its aggregating set, has no error. However,&nbsp;
<code>Line.1</code>
and <code>GeomSet.2</code>  do have an update error.</p>
<p>For the CAA feature the error propagation depends on the <i>CATIBuild</i>&nbsp;[<a href="#References">5</a>]
implementation.&nbsp;</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>During the update of a mechanical feature an error can occur. This error
blocks the construction of the topology of the feature and can be corrected by editing the
underlying sick features or the feature itself.&nbsp;</p>
<p align="right"> [ <a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->


<h3><a name="References"></a>References</h3>
<table width="100%">
  <tr>
    <td valign="top">[1]</td>
    <td><a href="../CAAOsmTechArticles/CAAOsmOverview.htm">Feature
      Modeler Overview</a></td>
  </tr>
  <tr>
    <td valign="top">[2]</td>
    <td><a href="CAAMmrMechModOverview.htm">Mechanical Modeler Overview</a></td>
  </tr>
  <tr>
    <td valign="top">[3]</td>
    <td><a href="CAAMmrContentsSpecCont1.htm">The Contents of the Specification Container
      - Geometrical Features Sets</a></td>
  </tr>
  <tr>
    <td valign="top">[4]</td>
    <td><a href="CAAMmrContentsSpecCont2.htm">The Contents of the Specification Container
      - Geometrical Features</a></td>
  </tr>
  <tr>
    <td valign="top">[5]</td>
    <td><a href="CAAMmrBuildIntegrating.htm">Integrating the New Geometrical Feature in the Update Mechanism</a></td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="History"></a>History</h3>
<table width="100%">
  <tr>
    <td valign="top">Version: <strong>1</strong>   [Dec 2002]</td>
    <td valign="top">Document created</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2002, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>
