<html>

 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta name="GENERATOR" content="Microsoft FrontPage 6.0">
 <meta name="ProgId" content="FrontPage.Editor.Document">
 <link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
 <title>Inserting Boolean Operations on Volume Features</title>
 </head>

 <body>

 <table width="100%">
   <tr>
     <td valign="top">
     <h1>Shape Design &amp; Styling</h1>
     </td>
     <td valign="top">
     <h2>Generative Shape Design</h2>
     </td>
     <td rowspan="2" align="right" valign="top">
     <h3><a name="Top"></a>Inserting Boolean Operations on Volume Features</h3>
     <p><em>Using the Part Design Boolean factory, add, remove , intersect 
     operations on volume features</em></td>
   </tr>
   <tr>
     <td class="use" colspan="2">Use Case</td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <table class="abstract">
   <tr>
     <td>
     <h3>Abstract</h3>
     <p>This article discusses the CAAGsiVolumeBooleanOpe use case. This use 
     case explains how to boolean operation on volume. </p>
     <ul>
       <li><b><a href="#Learn">What You Will Learn With This Use Case</a></b></li>
       <li><a href="#UseCase"><b>The CAAGsiVolumeBooleanOpe Use Case</b>
       <ul>
         <li></a><a href="#What">What Does CAAGsiVolumeBooleanOpe Do</a></li>
         <li><a href="#How">How to Launch CAAGsiVolumeBooleanOpe</a></li>
         <li><a href="#Where">Where to Find the CAAGsiVolumeBooleanOpe Code</a></li>
       </ul>
       </li>
       <li><b><a href="#Step">Step-by-Step</a></b></li>
       <li><b><a href="#InShort">In Short</a></b></li>
       <li><b><a href="#References">References</a></b></li>
     </ul>
     </td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="Learn"></a>What You Will You Learn With This Use Case</h3>
 <p>This use case learns how to use Part Design Boolean factory to create 
 boolean operations between volumes <br>
 Note : Creations of volume and use of boolean operations on volumes&nbsp; are 
 licensed by GSO Product </p>
 <blockquote>
   <ul>
     <li>Add , Remove , Intersect, Union trim are the supported operation on 
     volumes </li>
   </ul>
 </blockquote>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h3><a name="UseCase"></a>The CAAGsiVolumeBooleanOpe Use Case</h3>
 <p>CAAGsiVolumeBooleanOpe is a use case of the CAAGSMInterfaces.edu framework 
 that illustrates boolean operations on volumes using Part Design </p>
 <p>
 <img border="0" src="images/CAAGsiVolumeBooleanOpe.jpg" width="710" height="355">
 </p>
 <p>Boolean operation on volume are propose in the CATIPrtBooleanFactory, use 
 also for boolean operations on solid features, a context has to be initalize in 
 the creation methods <br>
 Note : The sample uses a C++ &quot;#define&quot; to be valuated to 4 for volume named 
 BOOLEAN_OPE_ON_VOLUME </p>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="What"></a>What Does CAAGsiVolumeBooleanOpe Do</h4>
 <p align="left">CAAGsiVolumeOpe creates different operations on volumes using&nbsp; 
 CATIPrtBooleanFactory </p>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="How"></a>How to Launch CAAGsiVolumeBooleanOpe</h4>
 <p>To launch CAAGsiVolumeBooleanOpe, you will need to set up the build time 
 environment, then compile CAAGsiVolumeBooleanOpe along with its prerequisites, 
 and set up the run time environment, and then execute the use case [<a href="#References">1</a>].</p>
 <p>Launch the use case as follows: </p>
 <ul>
   <li>With Windows
   <table width="90%">
     <tr>
       <td>
       <pre>e:&gt;CAAGsiVolumeBooleanOpe inputDirectory\GAAGsiNozzle.CATPart outputDirectory\CAAGsiVolumeBooleanOpe.CATPart</pre>
       </td>
     </tr>
   </table>
   </li>
   <li>With UNIX
   <table width="90%">
     <tr>
       <td>
       <pre>$ CAAGsiVolumeBooleanOpe inputDirectory/CAAGsiStartForBoolean.CATPart outputDirectory/CAAGsiVolumeBooleanOpe.CATPart</pre>
       </td>
     </tr>
   </table>
   </li>
 </ul>
 <p>where:</p>
 <table>
   <tr>
     <td><code>inputDirectory</code></td>
     <td>The directory into which <code>CAAGsiStartForBoolean.CATPart is found
     </code></td>
   </tr>
   <tr>
     <td><code>outputDirectory</code></td>
     <td>The directory into which <code>CAAGsiVolumeBooleanOpe.CATPart is saved</code></td>
   </tr>
   <tr>
     <td><code>CAAGsiVolumeBooleanOpe.CATPart</code> </td>
     <td>The file that contains the part created with the datum surface t</td>
   </tr>
 </table>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Where"></a>Where to Find the CAAGsiVolumeBooleanOpe Code</h4>
 <p>The CAAGsiVolumeBooleanOpe use case is made of main program located in the 
 CAAGsiVolumeBooleanOpe.m module of the CAAGSMInterfaces.edu framework:</p>
 <table>
   <tr>
     <td>Windows</td>
     <td><code>InstallRootDirectory\CAAGSMInterfaces.edu\CAAGsiVolumeBooleanOpe.m\</code></td>
   </tr>
   <tr>
     <td>Unix</td>
     <td><code>InstallRootDirectory/CAAGSMInterfaces.edu/CAAGsiVolumeBooleanOpe.m/</code></td>
   </tr>
 </table>
 <p>The input CAAGsiStartForBoolean.CATPart is proposed in Data.d directory of 
 CAAGSMInterfaces.edu </p>
 <table>
   <tr>
     <td>Windows</td>
     <td><code>InstallRootDirectory\CAAGSMInterfaces.edu\Data.d\CAAGsiStartForBoolean.CATPart
     </code></td>
   </tr>
   <tr>
     <td>Unix</td>
     <td><code>InstallRootDirectory/CAAGSMInterfaces.edu/Data.d/CAAGsiStartForBoolean.CATPart</code></td>
   </tr>
 </table>
 <p>where <code>InstallRootDirectory</code> is the directory where the CAA 
 CD-ROM is installed.</p>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h3><a name="Step"></a>Step-by-Step</h3>
 <p>There are five logical step in CAAGsiVolumeBooleanOpe: </p>
 <ol>
   <li><a href="#Prolog">Prolog</a></li>
   <li><a href="#Add">Create add operation on volume</a></li>
   <li><a href="#Remove">Create remove operation on volume</a></li>
   <li><a href="#Intersect">Create intersect operation on volume </a></li>
   <li><a href="#Close">Save and close session</a></li>
 </ol>
 <p>We will now comment each of those sections by looking at the code of the 
 main method of file CAAGsiVolumeBooleanOpe.</p>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Prolog"></a>Prolog</h4>
 <p>CAAGsiVolumeBooleanOpe sample first creates a session and opens the input 
 CATPart. </p>
 <p>Note: The important feature of the following sequence of code consists in 
 the required call to the GetPart() method of the CATPrtContainer interfaces. 
 This method allow to load in session the different containers of the part </p>
 <table class="code">
   <tr>
     <td>
     <pre>....
// creates a session
char *pSessionName = &quot;SampleSession&quot;;
CATSession *pSession = NULL; 
rc = Create_Session(pSessionName, pSession); 
if (NULL == pSession ) {
   cout &lt;&lt; &quot;(CAAGsiVolumeBooleanOpe) ERROR: Create_Session&quot; &lt;&lt; endl ;
   TestCaseError = 1 ;
}

// loads the document and initializes it
cout &lt;&lt; &quot;The input document &quot; &lt;&lt; InputName &lt;&lt; &quot; is opened&quot; &lt;&lt; endl ;
CATDocument *pDoc = NULL; 
rc =CATDocumentServices::OpenDocument(InputName, pDoc) ;

if (NULL == pDoc ) {
   cout &lt;&lt; &quot;(CAAGsiVolumeBooleanOpe) ERROR CATDocumentServices::OpenDocument&quot; &lt;&lt; endl ;
   TestCaseError = 2 ;
}

// Part Container 
CATIPrtContainer *piPartContainer = NULL ; 
CATIPrtPart_var spPrtPart; 

if ( NULL != pDoc ) { 
   // queries on the document to get the root container
   CATInit *pDocAsInit = NULL; 
   pDoc-&gt;QueryInterface(IID_CATInit, (void**)&amp;pDocAsInit) ; 
   if ( NULL != pDocAsInit ) {

    // Extracts from document a reference to its part in hPartAsRequest
   piPartContainer = 
      (CATIPrtContainer*)pDocAsInit-&gt;GetRootContainer(&quot;CATIPrtContainer&quot;);
   pDocAsInit-&gt;Release(); pDocAsInit = NULL ;

   if( NULL != piPartContainer ) {
      CATISpecObject_var spPart = piPartContainer-&gt;GetPart() ; 
      spPrtPart = spPart ;
   } 
} 
...
</pre>
     </td>
   </tr>
 </table>
 <p>Then in the initialization phase the wire frame and shape design and Part 
 Design factory are retrieved. . </p>
 <table class="code">
   <tr>
     <td>
     <pre>....
CATIPrtBooleanFactory_var spBoolPrtFact; 
if ( NULL !=piPartContainer ) { 

// Retrieve the boolean part  Factory Interface 
  CATIPrtBooleanFactory * _pBoolPrtFact =NULL; 
  rc = piPartContainer -&gt; QueryInterface(IID_CATIPrtBooleanFactory ,(void**)&amp;_pBoolPrtFact);
  if (SUCCEEDED(rc) ) {
     spBoolPrtFact = _pBoolPrtFact;
     if (_pBoolPrtFact) _pBoolPrtFact -&gt; Release(); _pBoolPrtFact = NULL; 
  }
}
.... 
</pre>
     </td>
   </tr>
 </table>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <p align="right"></p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Add"></a>Create add operation on volume </h4>
 <p>Create add operation using CreateAdd method of CATIPrtBooleanFactory</p>
 <p>Note: Insert in procedural view is done at creation under the current 
 geometrical feature set </p>
 <table class="code">
   <tr>
     <td>
     <pre>...
#define BOOLEAN_OPE_ON_VOLUME  4 
...
// Add 
// ----------------------------------------------------------------------------
cout &lt;&lt; &quot;(CAAGsiVolumeFormFeatures) Add &quot; &lt;&lt; endl;
CATISpecObject_var spSpecExtr1 = ...
CATISpecObject_var spSpecExtr2 = ...

CATISpecObject_var spSpecAdd = spBoolPrtFact -&gt; CreateAdd ( spSpecExtr1,spSpecExtr2 ,BOOLEAN_OPE_ON_VOLUME) ;
CAAGsiObjectUpdate(spSpecAdd) ;
...
</pre>
     </td>
   </tr>
 </table>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Remove"></a>Create remove operation on volume </h4>
 <p>Create remove operation using CreateRemove method of CATIPrtBooleanFactory</p>
 <p>Note: Insert in procedural view is done at creation under the current 
 geometrical feature set </p>
 <table class="code">
   <tr>
     <td>
     <pre>...
#define BOOLEAN_OPE_ON_VOLUME  4 
...
// Remove 
// ----------------------------------------------------------------------------
cout &lt;&lt; &quot;(CAAGsiVolumeFormFeatures) Remove &quot; &lt;&lt; endl;
CATISpecObject_var spSpecExtr3 = ...

CATISpecObject_var spSpecRemove = spBoolPrtFact -&gt; CreateRemove ( spSpecAdd,spSpecExtr3 ,BOOLEAN_OPE_ON_VOLUME ) ;
CAAGsiObjectUpdate(spSpecRemove) ;

</pre>
     </td>
   </tr>
 </table>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Intersect"></a>Create intersect operation on volume </h4>
 <p>Create intersect operation using CreateIntersect method of 
 CATIPrtBooleanFactory</p>
 <table class="code">
   <tr>
     <td>
     <pre>...
#define BOOLEAN_OPE_ON_VOLUME  4 
...
// Intersection 
// ----------------------------------------------------------------------------
cout &lt;&lt; &quot;(CAAGsiVolumeFormFeatures) Intersection &quot; &lt;&lt; endl;
CATISpecObject_var spSpecExtr4 = ...
CATISpecObject_var spSpecExtr5 = ...

CATISpecObject_var spSpecInt = spBoolPrtFact -&gt; CreateIntersect ( spSpecExtr4,spSpecExtr5 ,BOOLEAN_OPE_ON_VOLUME ) ;
CAAGsiObjectUpdate(spSpecInt) ;

</pre>
     </td>
   </tr>
 </table>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Close"></a>Save and close session </h4>
 <p>Save part and close the session </p>
 <table class="code">
   <tr>
     <td>
     <pre>... 
// save  
if (NULL != OutputName )      {    
    rc = CATDocumentServices::SaveAs  (*pDoc, OutputName );
    if (SUCCEEDED(rc))   {
            cout &lt;&lt; &quot;(CAAGsiVolumeBooleanOpe) Document saved &quot; &lt;&lt; endl;
     }
     else {
            cout &lt;&lt; &quot;ERROR in saving document&quot; &lt;&lt; endl ;
     }
}    
// Closes the document
CATDocumentServices::Remove(*pDoc);
   
// Ends session and drops document	
Delete_Session(&quot;SampleSession&quot;);
...    
</pre>
     </td>
   </tr>
 </table>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="InShort"></a>In Short</h3>
 <p>This use case has demonstrated the way to perform boolean operation on 
 volume thanks to part design boolean factory. resulting feature add, remove , 
 intersect and Union-Trin are inserted in GS or OGS When then are inserted in 
 OGS the boolean operation are 'absorbant' features </p>
 <p>We illustrate feature in this use case boolean operation that do not have 
 BRep feature as input . Operations that required BRep feature in input (Ex: 
 Union-Trim) the use of boolean operation interface is similar as presented in 
 the sample. </p>
 <p>Note : The BRep features are retrieved in interactive commands through in 
 selecting of sub-element and using Mechanical Modeler agent (Ex:CATFeatureImportAgent)
 </p>
 <p></p>
 <p>Union-Trim </p>
 <p>Note : The BRep features are retrieved in interactive commands through in 
 selecting of sub-element and using Mechanical Modeler agent 
 CATFeatureImportAgent </p>
 <p></p>
 <p align="right">[<a href="#Top">Top</a>]</p>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="References"></a>References</h3>
 <table width="100%">
   <tr>
     <td valign="top">[1]</td>
     <td>
     <a href="../CAADocUseCases/CAADocRunSample.htm">
     Building and Launching a CAA V5 Use Case</a></td>
   </tr>
   <tr>
     <td valign="top">[2]</td>
     <td>
     <a href="../CAAGsiTechArticles/CAAGsiShapeDesignFeature.htm">
     About Generative Shape Design Features</a></td>
   </tr>
   <tr>
     <td valign="top">[3]</td>
     <td>
     <a href="../CAAGsiTechArticles/CAAGsiInsertInProceduralView.htm">
     Inserting a Shape Design Feature in the procedural view </a></td>
   </tr>
   <tr>
     <td valign="top">[4]</td>
     <td><a href="../CAAGsiTechArticles/CAAGsiUpdateShapeDesign.htm">
     Updating a shape Design feature </a></td>
   </tr>
   <tr>
     <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="History"></a>History</h3>
 <table width="100%">
   <tr>
     <td valign="top">Version: <strong>1</strong> [May 2004]</td>
     <td valign="top">Document created</td>
   </tr>
   <tr>
     <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <p><i>Copyright © 2004, Dassault Systèmes. All rights reserved.</i></p>

 </body>
</html>
