<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns="http://www.w3.org/TR/REC-html40">
	<head>
		<title>Retrieving VPM Identification</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
		<meta name="ProgId" content="FrontPage.Editor.Document">
		<link rel="stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css"><!--[if !mso]>
<STYLE>
v\:*         { behavior: url(#default#VML) }
o\:*         { behavior: url(#default#VML) }
.shape       { behavior: url(#default#VML) }
</STYLE>
<![endif]-->  <!--[if gte mso 9]>
<xml><o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]-->
	</head>
	<body>
		<table width="100%">
			<tr>
				<td valign="top">
					<h1>3D PLM Enterprise Architecture</h1>
				</td>
				<td valign="top">
					<h2>ENOVIA V5 Integration</h2>
				</td>
				<td rowspan="2" align="right" valign="top">
					<h3><a name="Top"></a>Display Name customization</h3>
					<em>Retrieving information about existing object</em></td>
			</tr>
			<tr>
				<td class="use" colspan="2">Use Case</td>
			</tr>
		</table>
		<hr>
		<!---------------------------------comment------------------------------------->
		<table class="abstract">
			<tr>
				<td>
					<h3>Abstract</h3>
					<p>&nbsp;<ul>
							<li>
								<a href="#Learn"><strong>What You Will Learn With This Use Case</strong></a>
							<li>
								<a href="#UseCase"><strong>The DisplayName Use Case</strong></a>
								<ul>
									<li>
										<a href="#What">What Does CAAE5iUEDocumentName Do</a>
									<li>
										<a href="#How">How to Launch CAAE5iUEDocumentName </a>
									<li>
										<a href="#Where">Where to Find the CAAE5iUEDocumentName Code</a></li>
								</ul>
							<li>
								<a href="#Step"><strong>Step-by-Step</strong></a>
							<li>
								<a href="#InShort"><strong>In Short</strong></a>
							<li>
								<a href="#References"><strong>References</strong></a></li>
						</ul>
				</td>
			</tr>
		</table>
		<hr>
		<!---------------------------------comment------------------------------------->
		<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
		<p class="MsoNormal">Using the CATIPDMUEDocumentName interface, the name displayed 
			in CATIA V5 for ENOVIA V5 documents can be customized.</p>
		<p class="MsoNormal">This use case will focus solely on the CATIPDMUEDocumentName 
			interface implementation. For more information on</p>
		<p class="MsoNormal"><span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>how to activate Attribute Mapping, refer to VPM Navigator documentation</p>
		<p class="MsoNormal"><span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>how to retrieve ENOVIA V5 attributes using CAA APIs, refer to 
			ObjectModelerBase and Knowledge CAA documentation</p>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h3><a name="UseCase"></a>The DisplayName Use Case</h3>
		<p>The CAAE5iUEDocumentName is a use case of the CAAProductStructureE5i.edu 
			framework that illustrates how to change display name in CATIA in accordance 
			with an ENOVIA V5 Data Customization.</p>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h4><a name="What"></a>What Does CAAE5iUEDocumentName Do</h4>
		<p class="MsoNormal">The goal of CAAE5iUEDocumentName is to demonstrate how default 
			document names can be overridden.</p>
		<p class="MsoNormal">The use case is composed of two parts:</p>
		<p class="MsoNormal"><span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>One part is the code implementing CATIPDMUEDocumentName.</p>
		<p class="MsoNormal"><span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The other part is the XML file used to declare the mapping of ENOVIA V5 
			document attributes in CATIA.</p>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h4><a name="How"></a>How to Launch CAAE5iUEDocumentName
		</h4>
		<p class="MsoNormal">To launch CAAE5iUEDocumentName, you will need to set up the 
			build time environment, then compile CAAE5iUEDocumentName along with its 
			prerequisites, set up the run time environment, and then execute the use case [<a href="#References">1</a>] 
			in the following way:
		</p>
		<p class="MsoNormal">1.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Set the current directory to <code>InstallRootDirectory/CAAProductStructureE5i.edu</code></p>
		<p class="MsoNormal">2.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Set up&nbsp; the build time environment and build the following module: 
			CAAE5iUEDocumentName.m</p>
		<p class="MsoNormal">3.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>edit file <code>InstallRootDirectory/CAAProductStructureE5i.edu/CNext/code/dictionary/CAAProductStructureE5i.edu.dico</code>: 
			uncomment the following line<br>
			<table class="code" id="table1">
				<tr>
					<td>
						<pre><span style="FONT-SIZE: 10pt; FONT-FAMILY: Courier New">#CATUEPDMDocumentName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CATIPDMUEDocumentName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; libCAAE5iUEDocumentName</span></pre>
					</td>
				</tr>
			</table>
		<p class="MsoNormal">4.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Install the run time environment by executing the command mkCreateRuntimeView
		</p>
		<p class="MsoNormal">5.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Run CNEXT on the command line</p>
		<p class="MsoNormal">6.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>In the Tools + Options window, select the General + Compatibility + ENOVIA V5 tab 
			page</p>
		<p class="MsoNormal">7.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Activate the "Work with Attribute Mapping" checkbox and use the "." button next to 
			the "Attribute Mapping File" entry field to locate the <code>InstallRootDirectory/CAAProductStructureE5i.edu/CNext/Data.d/DV_Version_Status.xml</code>
			file</p>
		<p class="MsoNormal">8.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Connect to ENOVIA V5 using the command on Enovia V5 Toolbar. Important: step 7 MUST 
			be done before connecting to ENOVIA V5. Otherwise you will need to stop CATIA 
			and restart.</p>
		<p class="MsoNormal">9.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Search for an ENOVIA V5 document<br>
			<br>
			<img border="0" width="510" height="130" src="image001.jpg" v:shapes="_x0000_s1026"></p>
		<span style="FONT-SIZE: 8pt; FONT-FAMILY: Verdana">
<br clear="all" style="PAGE-BREAK-BEFORE:always">
&nbsp;</span><p class="MsoNormal">10.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;
</span>Open the document in CATIA V5. The title bar of the document should show the 
			customized name: the document's name should now be suffixed with "_revXXX(YYY)" 
			where XXX is the document's ENOVIA revision and YYY is the document's ENOVIA 
			status.<br>
			<br>
			<img border="0" width="463" height="383" src="image002.jpg" v:shapes="_x0000_s1025"></p>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h4><a name="Where"></a>Where to Find the CAAE5iUEDocumentName Code</h4>
		<p>&nbsp;</p>
		<table>
			<tbody>
				<tr>
					<td>Windows</td>
					<td><code>InstallRootDirectory\CAAProductStructureE5i.edu</code><p class="MsoNormal" style="MARGIN-LEFT: 57.6pt; TEXT-INDENT: -18pt">
							<span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>the code implementing CATIPDMUEDocumentName can be found in <code>CAAE5iUEDocumentName.m\src\CAAE5iUEDocumentName.cpp</code></p>
						<p class="MsoNormal" style="MARGIN-LEFT: 57.6pt; TEXT-INDENT: -18pt">
							<span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>the corresponding dictionary entry can be found in <code>CNext\code\dictionary\CAAProductStructureE5i.edu.dico</code></p>
						<p class="MsoNormal" style="MARGIN-LEFT: 57.6pt; TEXT-INDENT: -18pt">
							<span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>the XML file used to declare the mapping of ENOVIA V5 document attributes in CATIA 
							can be found in <code>CNext\Data.d\DV_Version_Status.xml</code></p>
					</td>
				</tr>
				<tr>
					<td>Unix</td>
					<td><code>InstallRootDirectory/CAAProductStructureE5i.edu</code><p class="MsoNormal" style="MARGIN-LEFT: 57.6pt; TEXT-INDENT: -18pt">
							<span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>the code implementing CATIPDMUEDocumentName can be found in <code>CAAPbiUEDocumentName.m/src/CAAPbiUEDocumentName.cpp</code></p>
						<p class="MsoNormal" style="MARGIN-LEFT: 57.6pt; TEXT-INDENT: -18pt">
							<span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>the corresponding dictionary entry can be found in <code>CNext/code/dictionary/CAAProductStructureE5i.edu.dico</code></p>
						<p class="MsoNormal" style="MARGIN-LEFT: 57.6pt; TEXT-INDENT: -18pt">
							<span style="FONT-FAMILY: Symbol">·<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>the XML file used to declare the mapping of ENOVIA V5 document attributes in CATIA 
							can be found in <code>CNext/Data.d/DV_Version_Status.xml</code></p>
					</td>
				</tr>
			</tbody>
		</table>
		<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM is 
			installed.</p>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h3><a name="Step"></a>Step-by-Step</h3>
		<p>The implementation of the CAAE5iUEDocumentName use case includes the following 
			steps:</p>
		<table width="100%">
			<tr>
				<th width="83">
					#</th>
				<th>
					Step</th>
				<th>
					Where</th>
			</tr>
			<tr>
				<td valign="top" width="83"><a href="#Step1">1</a></td>
				<td valign="top">Map attributes V_version and V_status</td>
				<td valign="top">Attribute Mapping file</td>
			</tr>
			<tr>
				<td valign="top" width="83"><a href="#Step2">2</a></td>
				<td valign="top">Implement the User Exit</td>
				<td valign="top">C++ source, dictionary file</td>
			</tr>
			<tr>
				<td valign="top" width="83"><a href="#Step3">3</a></td>
				<td valign="top">Compute the document display names</td>
				<td valign="top">C++ Source</td>
			</tr>
		</table>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h4><a name="Step1"></a>Map attributes V_version and V_status</h4>
		<p class="MsoNormal">The DV_Version_Status.xml Attribute Mapping file declares that 
			the ENOVIA V5 Document Revision's attributes V_version and V_status must be 
			mapped into CATIA.</p>
		<p class="MsoNormal">This means the attributes will be made available in the CATIA 
			session in the Document Properties window, and via the 
			CATOmbDocPropertyServices API. E.G. the V_status attribute declared above will 
			be created in the CATIA V5 document under the name ENOVIA5.DocumentStatus.</p>
		<table class="code">
			<tr>
				<td>
					<p class="MsoNormal"><span style="FONT-FAMILY: Courier New">&nbsp;
		<span style="COLOR:blue">&lt;</span><span style="COLOR:maroon">Attribute</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Name</span><span style="COLOR:blue">="DocumentStatus"</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Type</span><span style="COLOR:blue">="STRING"&gt;</span></span></p>
					<p class="MsoNormal"><span style="FONT-FAMILY: Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<span style="COLOR:blue">&lt;</span><span style="COLOR:maroon">CATIAInfo</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Name</span><span style="COLOR:blue">="ENOVIA5.DocumentStatus"</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Editable</span><span style="COLOR:blue">="No"</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Visible</span><span style="COLOR:blue">="Yes"</span><span style="COLOR:fuchsia"></span><span style="COLOR:blue">/&gt;</span></span></p>
					<p class="MsoNormal"><span style="FONT-FAMILY: Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<span style="COLOR:blue">&lt;</span><span style="COLOR:maroon">DBInfo</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Name</span><span style="COLOR:blue">="V_status" 
		L</span><span style="COLOR:red">CASubEntity</span><span style="COLOR:blue">="DV"</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Editable</span><span style="COLOR:blue">="Yes"</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">Visible</span><span style="COLOR:blue">="Yes"</span><span style="COLOR:fuchsia"></span><span style="COLOR:red">DefaultValue</span><span style="COLOR:blue">="_"/&gt;</span></span></p>
					<p class="MsoNormal"><span style="FONT-FAMILY: Courier New">&nbsp;
		<span style="COLOR:blue">&lt;/</span><span style="COLOR:maroon">Attribute</span><span style="COLOR:blue">&gt;</span></span></p>
				</td>
			</tr>
		</table>
		<h4><a name="Step2"></a>Implement the User Exit</h4>
		<p class="MsoNormal">The CAAE5iUEDocumentName.cpp code is a user exit program; I.E. 
			CATIA V5 calls this code when a document name is needed.</p>
		<p class="MsoNormal">To do this, CATIA instanciates a CATObject with late type 
			CATUEPDMDocumentName and queries it for the interface CATIPDMUEDocumentName.</p>
		<p class="MsoNormal">This is why CAAE5iUEDocumentName.cpp declares</p>
		<p class="MsoNormal"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Courier New">
1.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp; </span></span>its late type 
			is CATUEPDMDocumentName:</p>
		<table class="code" id="table1">
			<tr>
				<td>
					<pre><span style="FONT-FAMILY: Courier New">CATImplementClass( CAAE5iUEDocumentName, DataExtension, <span style="COLOR:blue">CATBaseUnknown</span>, <b>CATUEPDMDocumentName</b> );</span></pre>
				</td>
			</tr>
		</table>
		<p class="MsoNormal">2.<span style="FONT:7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>it implements CATIPDMUEDocumentName:</p>
		<table class="code" id="table1">
			<tr>
				<td>
					<pre><span style="FONT-FAMILY: Courier New">#include "TIE_CATIPDMUEDocumentName.h"
&nbsp;TIEchain_<b>CATIPDMUEDocumentName</b>(CAAE5iUEDocumentName);</span></pre>
				</td>
			</tr>
		</table>
		<p class="MsoNormal">Additionally the CAAProductStructureE5i.edu.dico file 
			declares the implementation of CATIPDMUEDocumentName in the following line:</p>
		<table class="code" id="table1">
			<tr>
				<td>
					<pre><span style="FONT-SIZE: 10pt; FONT-FAMILY: Courier New">CATUEPDMDocumentName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CATIPDMUEDocumentName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; libCAAE5iUEDocumentName</span></pre>
				</td>
			</tr>
		</table>
		<h4><a name="Step3"></a>Compute the document display names</h4>
		<p class="MsoNormal">Based on the CATDocument and CATOmbDocPropertyServices APIs, 
			CAAE5iUEDocumentName.cpp retrieves the values of the ENOVIA V5 Document 
			Revision's attributes V_version and V_status attributes, and generates the 
			document name to be displayed.</p>
		<table class="code" id="table2">
			<tr>
				<td>
					<p class="MsoNormal"><span style="FONT-FAMILY: Courier New">
		CATOmbDocPropertyServices::GetValue(docId, 
		"ENOVIA5.DocumentVersion.Value", version);</span></p>
				</td>
			</tr>
		</table>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<!---------------------------------comment------------------------------------->
		<h3><a name="InShort"></a>In Short</h3>
		<p class="MsoNormal">This use case has demonstrated how ENOVIA V5 document names 
			can be customized by implementing the CATIPDMUEDocumentName interface to 
			compute the name based on ENOVIA V5 document attribute values.
		</p>
		<p class="MsoNormal">Alternative implementations can be designed, based on 
			different characteristics of the CATIA V5 document, such as part attributes 
			mapped by Attribute Mapping, for CATPart or CATProduct type documents.</p>
		<p>&nbsp;</p>
		<p align="right">[<a href="#Top">Top</a>]</p>
		<hr>
		<!---------------------------------comment------------------------------------->
		<h3><a name="References"></a>References</h3>
		<table width="100%">
			<tr>
				<td valign="top">[1]</td>
				<td><a href="../CAADocUseCases/CAADocRunSample.htm">Building 
						and Launching a CAA V5 Use Case</a></td>
			</tr>
			<tr>
				<td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
			</tr>
		</table>
		<hr>
		<!---------------------------------comment------------------------------------->
		<h3><a name="History"></a>History</h3>
		<table width="100%">
			<tr>
				<td valign="top">Version: <strong>1</strong> [Apr 2006]</td>
				<td valign="top">Document created</td>
			</tr>
			<tr>
				<td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
			</tr>
		</table>
		<hr>
		<!---------------------------------comment------------------------------------->
		<p><i>Copyright © 2006, Dassault Systèmes. All rights reserved.</i></p>
	</body>
</html>
