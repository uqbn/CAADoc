<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Opening and Displaying an Image File</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>3D PLM Enterprise Architecture</h1>
    </td>
    <td valign="top">
      <h2>3D Visualization - Print</h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>Opening and Displaying an Image File</h3>
      <em>Reading a TIFF file to display it in a viewer</em></td>
  </tr>
  <tr>
    <td class="use" colspan="2">Use Case</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td>
      <h3>Abstract</h3>
      <p>This article discusses the CAAPrtApplication use case. This use case
      explains how to open an image file and display it in a viewer.
      <ul>
        <li><a href="#Learn"><strong>What You Will Learn With This Use Case</strong></a></li>
        <li><a href="#UseCase"><strong>The CAAPrtApplication Use Case</strong></a>
          <ul>
            <li><a href="#What">What Does CAAPrtApplication Do</a></li>
            <li><a href="#How">How to Launch CAAPrtApplication</a></li>
            <li><a href="#Where">Where to Find the CAAPrtApplication Code</a></li>
          </ul>
        </li>
        <li><a href="#Step"><strong>Step-by-Step<strong></a></li>
          <li><a href="#InShort"><strong>In Short</strong></a></li>
          <li><a href="#References"><strong>References</strong></a></li>
          </ul>
        </strong></strong></td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->

<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
<p>This use case is intended to open an image file read from the disk and to
display it in a viewer. To do this, you'll learn how to create a print file
image from the image file, print parameters, a 2D print representation from the
print file image, and how to display this representation in a viewer.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="UseCase"></a>The CAAPrtApplication Use Case</h3>
<p>CAAPrtApplication is a set of use cases of the CAAPrint.edu framework that
illustrates Print framework capabilities.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="What"></a>What Does CAAPrtApplication Do</h4>
<p>This use case shows several capabilities of the Print framework. Each command
of CAAPrtApplication is described below.</p>
<table>
  <tr>
    <td rowspan="5" valign="top">File</td>
    <td>Open</td>
    <td>Opening a TIFF file</td>
  </tr>
  <tr>
    <td>Print</td>
    <td>Printing the image displayed in the viewer</td>
  </tr>
  <tr>
    <td>Capture</td>
    <td>Making a screen shot of the image displayed in the viewer</td>
  </tr>
  <tr>
    <td>Album</td>
    <td>Managing the image album</td>
  </tr>
  <tr>
    <td>Printer Setup</td>
    <td>Managing printer setup parameters</td>
  </tr>
  <tr>
    <td rowspan="3" valign="top">Printable Objects</td>
    <td>Display a test image</td>
    <td>Displaying a supplied sample TIFF file</td>
  </tr>
  <tr>
    <td>Print a test image</td>
    <td>Printing a supplied sample JPEG file</td>
  </tr>
  <tr>
    <td>Print a label</td>
    <td>Typing a text in a window and printing it with a frame</td>
  </tr>
</table>
<p>This article describes what happens when the application is launched with the
pathname of a TIFF file as parameter, which is equivalent to File Open. It
displays a file selection box to select the TIFF file, and selecting the file
displays it in the application viewer.</p>
<table>
  <caption><a name="Fig1"></a><i>Figure 1: The CAAPrtWheatField.tif File</i></caption>
  <tr>
    <td><img border="0" src="images/CAASampleTIFFImage.gif" width="657" height="550"></td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="How"></a>How to Launch CAAPrtApplication</h4>
<p>To launch CAAPrtApplication, you will need to set up the build time
environment, then compile CAAPrtApplication along with its prerequisites, set up
the run time environment, and then execute the use case [<a href="#References">1</a>].</p>
<p>You can launch CAAPrtApplication using a TIFF file as argument.</p>
<ul>
  <li>With Windows
    <table class="code">
      <tr>
        <td>
          <pre>E:&gt;CAAPrtApplication InstallRootDirectory\CAAPrint.edu\CNext\resources\graphic\images\CAAPrtWheatField.tif</pre>
        </td>
      </tr>
    </table>
  </li>
  <li>With UNIX
    <table class="code">
      <tr>
        <td>
          <pre>$ CAAPrtApplication InstallRootDirectory/CAAPrint.edu/CNext/resources/graphic/images/CAAPrtWheatField.tif</pre>
        </td>
      </tr>
    </table>
  </li>
</ul>
<p>where:</p>
<ul>
  <li><code>InstallRootDirectory</code> is the directory into which the CAA
    CD-ROM were unloaded</li>
  <li><code>CAAPrtWheatField.tif</code> is the sample TIFF file supplied and
    shown in <a href="#Fig1">Figure 1</a>. You can use other TIFF files you may
    have at hand.</li>
</ul>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Where"></a>Where to Find the CAAPrtApplication Code</h4>
<p>The CAAPrtApplication use case is made of an application class and of a
window class whose header and source files are located in the
CAAPrtApplication.m module of the CAAPrint.edu framework:</p>
<table>
  <tr>
    <td>Windows</td>
    <td><code>InstallRootDirectory\CAAPrint.edu\CAAPrtApplication.m</code></td>
  </tr>
  <tr>
    <td>Unix</td>
    <td><code>InstallRootDirectory/CAAPrint.edu/CAAPrtApplication.m</code></td>
  </tr>
</table>
<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM
is installed.</p>
<p>CAAPrtApplication includes the following files:</p>
<table width="100%">
  <tr>
    <td><b>LocalInterfaces directory</b></td>
  </tr>
  <tr>
    <td>CAAPrtApplication.h</td>
    <td>Header file for the interactive application</td>
  </tr>
  <tr>
    <td>CAAPrtDialog.h</td>
    <td>Header file for the dialog window that hosts the viewer</td>
  </tr>
  <tr>
    <td><b>src directory</b></td>
  </tr>
  <tr>
    <td>CAAPrtApplication.cpp</td>
    <td>Source file for the interactive application</td>
  </tr>
  <tr>
    <td>CAAPrtDialog.cpp</td>
    <td>Source file for the dialog window that hosts the viewer</td>
  </tr>
</table>
<p>This article explains the <code>DisplayImage</code> method located in the
CAAPrtDialog.cpp file.
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="Step"></a>Step-by-Step</h3>
<p>To display a TIFF image file in a 2D viewer, there are four main steps:</p>
<ol>
  <li><a href="#Step1">Creating a Print File Image from the Selected File</a></li>
  <li><a href="#Step2">Defining Print Parameters</a></li>
  <li><a href="#Step3">Creating a 2D Representation from the Image</a></li>
  <li><a href="#Step4">Displaying the Created 2D Representation</a></li>
</ol>
<p>The preliminary tasks that consist in either retrieving the input file name
passed as the command argument or creating and displaying the file selection
box, retrieving the input file name from the file selected, and checking that
its a TIFF file not described. The input file name is passed to the <code>DisplayImage</code>
method in the <code>IPath</code> argument, such as TestFile.tif. The viewer is
accessed as a data member of the dialog window class using the <code>_pViewer</code>
pointer, and the representation created is kept in the <code>_pRep</code> data
member.</p>
<p>The <code>DisplayImage</code> method reads the TIFF file, creates a 2D
representation, and displays this representation in the 2D viewer of the
application.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Step1"></a>Creating a Print File Image from the Input File</h4>
<table class="code">
  <tr>
    <td>
      <pre>void CAAPrtDialog::DisplayImage(const char* iPath)
{
  CATPrintFileImage *pImage = new <strong>CATPrintFileImage</strong>(iPath, &quot;TIFF&quot;);
  ...</pre>
    </td>
  </tr>
</table>
<p>This print file image is an instance of the <i>CATPrintFileImage</i> class
instantiated from the input file. The input file format is passed as the second
argument, here TIFF. The print file image created holds the input file in memory
and the TIFF interpreter to enable the file interpretation as soon as this will
be asked.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Step2"></a>Defining Print Parameters</h4>
<p>A print parameter object should be defined to be associated with the print
file image.</p>
<table class="code">
  <tr>
    <td>
      <pre>  ...
  <strong>CATPrintParameters</strong> Parameters;
  ...</pre>
    </td>
  </tr>
</table>
<p>The print parameters are taken into account to create the printed output. No
specific value is reset, so all the print parameters take their default values.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Step3"></a>Creating a 2D Representation from the Image</h4>
<p>The file conversion to a 2D representation can now take place.</p>
<table class="code">
  <tr>
    <td>
      <pre>  ...
  CAT2DRep * pRep = NULL;
  pRep = new <strong>CATPrint2DRep</strong>(pImage, Parameters);

  pImage-&gt;<strong>Release</strong>();
  ...</pre>
    </td>
  </tr>
</table>
<p>The <i>CATPrint2DRep</i> is a specific 2D representation built from a print
file image and a set of print parameters. The print file image is now useless
and can be released.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Step4"></a>Displaying the Created 2D Representation</h4>
<table class="code">
  <tr>
    <td>
      <pre>  ...
  if (pRep)
  {
    if (_pRep)                    <em>// If there is a previous representation displayed</em>
    {
      _pViewer-&gt;<strong>RemoveRep</strong>(_pRep); <em>// Removes it from the viewer</em>
      _pRep-&gt;<strong>Destroy</strong>();           <em>// Releases it</em>
    }
    
    _pViewer-&gt;<strong>AddRep</strong>(pRep);       <em>// Adds the representation to the viewer</em>
    _pViewer-&gt;<strong>Reframe</strong>();          <em>// Redraws the viewer contents</em>
      
    _pRep = pRep;      <em>// Keeps the new representation for future use (printing, etc.)</em>
  }
}</pre>
    </td>
  </tr>
</table>
<p>If the 2D representation is successfully created, it can be displayed. The
possible displayed representation is first removed from the viewer and released,
and the new created representtaion is added to the viewer that is then asked to
redraw itself. This representation is kept as a data member for a future use,
such as printing, or capturing it in the album.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>This use case shows the objects involved when displaying an image file, here
encoded using TIFF, in a 2D viewer. These objects are the print file image, the
set of print parameters, the 2D representation into which the image is
converted, and the 2D viewer that displays it.</p>
<p>First, a <i>CATPrintFileImage</i> instance is created using the input file,
and a <i>CATPrintParameters</i> instance is created. Then a <i>CATPrint2DRep</i>
instance is created using print file image and the print parameters. Finally,
this representation is passed to the 2D viewer for display.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->

<h3><a name="References"></a>References</h3>
<table width="100%">
  <tr>
    <td valign="top">[1]</td>
    <td><a href="../CAADocUseCases/CAADocRunSample.htm">Building
      and Lauching CAA V5 Samples</a></td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="History"></a>History</h3>
<table width="100%">
  <tr>
    <td valign="top">Version: <strong>1</strong> [Jan 2000]</td>
    <td valign="top">Document created</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2000, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>
