<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Getting Started with Dialog Boxes</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>3D PLM Enterprise Architecture</h1>
    </td>
    <td valign="top">
      <h2>User Interface - Dialogs</h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>Getting Started with Dialog Boxes</h3>
      <em>A first sample with dialog boxes</em></td>
  </tr>
  <tr>
    <td class="use" colspan="2">Use Case</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td>
      <h3>Abstract</h3>
      <p>This article shows a simple example of dialog box created using the
      Dialog framework.
      <ul>
        <li><a href="#Learn"><strong>What You Will Learn With This Use Case</strong></a></li>
        <li><a href="#UseCase"><strong>The CAADlgHelloApplication Use Case</strong></a>
          <ul>
            <li><a href="#What">What Does CAADlgHelloApplication Do</a></li>
            <li><a href="#How">How to Launch CAADlgHelloApplication</a></li>
            <li><a href="#Where">Where to Find the CAADlgHelloApplication Code</a></li>
          </ul>
        <li><a href="#Step"><strong>Step-by-Step</strong></a></li>
        <li><a href="#InShort"><strong>In Short</strong></a></li>
        <li><a href="#References"><strong>References</strong></a></li>
      </ul>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
<p>The Dialog framework is intended to help application developers to simply
design an implement their dialog windows and boxes. Its main characteristics
are:
<ul>
  <li>Programmer productivity: it provides high-level objects that allow for
    component reusability</li>
  <li>Portability: the objects created can be implemented on Motif and Windows
    platforms without any change or customization</li>
  <li>Standard compliance: it is built on top of the OSF/Motif and MFC layers</li>
  <li>Versatility: it can be used as a standalone framework, along with its
    prerequisites, or in a CATIA Version 4 or Version 5 environment.</li>
</ul>
<p>Let's have a look at this framework through two examples. The first sample
program shows how to build a very simple window and how to close it. The second
sample introduces a larger number of dialog window components or objects and how
to manage window layouts as well as triggering actions when clicking on Dialog
framework objects [<a href="#References">1</a>].</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="UseCase"></a>The CAADlgHelloApplication Use Case</h3>
<p>CAADlgHelloApplication is a use case of the CAADialog.edu framework that
illustrates Dialog framework capabilities.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="What"></a>What Does CAADlgHelloApplication Do</h4>
<p>For this example, you will simply display a prompt box that prints
&quot;Hello, CAA V5&quot;. To do this, derive your own application class, called
<i>CAADlgHelloApplication</i>, from the class <i>CATInteractiveApplication</i> [<a href="#References">2</a>].
This application will:
<ol>
  <li>create a window to display &quot;Hello, CAA V5&quot; by deriving the class
    <i>CATDlgDocument</i>
  <li>makes the window visible.</li>
</ol>
<p>In addition, the mechanism to close the application from the window is
included. The window is as follows:</p>
<table border="0">
  <tr>
    <td><img border="0" src="../CAADlgTechArticles/images/CATDlgHello.jpg" width="150" height="47"></td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="How"></a>How to Launch CAADlgHelloApplication</h4>
<p>To launch CAADlgHelloApplication, you will need to set up the build time environment,
then compile CAADlgHelloApplication along with its prerequisites, set up the run time
environment, and then execute the use case [<a href="#References">3</a>].</p>
<p align="right">[<a href="#Top">Top</a>]</p>

<!---------------------------------comment------------------------------------->

<h4><a name="Where"></a>Where to Find the CAADlgHelloApplication Code</h4>
<p>The CAADlgHelloApplication use case is made of a several classes located in
the CAADlgHelloApplication.m module of the CAADialog.edu framework:</p>
<table>
  <tbody>
    <tr>
      <td>Windows</td>
      <td><code>InstallRootDirectory\CAADialog.edu\</code><code>CAADlgHelloApplication</code><code>.m\</code></td>
    </tr>
    <tr>
      <td>Unix</td>
      <td><code>InstallRootDirectory/CAADialog.edu/CAADlgHelloApplication.m/</code></td>
    </tr>
  </tbody>
</table>
<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM
is installed.</p>
<p>The CAADlgHelloApplication.m module includes four files:</p>
<table>
  <tbody>
    <tr>
      <td><em>CAADlgHelloApplication.h</em></td>
      <td>The interactive application header file</td>
    </tr>
    <tr>
      <td><em>CAADlgHelloApplication.cpp</em></td>
      <td>The interactive application source file</td>
    </tr>
    <tr>
      <td><em>CAADlgHelloWindow.h</em></td>
      <td>The application window header file</td>
    </tr>
    <tr>
      <td><em>CAADlgHelloWindow.cpp</em></td>
      <td>The application window source file</td>
    </tr>
  </tbody>
</table>
<p>The resource file CAADlgHelloWindow.CATNls is located in the CNext\resources\msgcatalog
directory.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="Step"></a>Step-by-Step</h3>
<p>There are two logical steps in CAADlgHelloApplication:</p>
<ol>
  <li><a href="#Step1">Creating the Interactive Application</a></li>
  <li><a href="#Step2">Creating the Application Window</a></li>
</ol>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Step1"></a>Creating the Interactive Application</h4>
<p>Let's look at CAADlgHelloApplication.h, the application header file:</p>
<table class="code">
  <tr>
    <td>
      <pre>#include &quot;CATInteractiveApplication.h&quot;

class CAADlgHelloApplication: public CATInteractiveApplication {

  public:

    CAADlgHelloApplication(const CATString &amp;iIdentifier);

    virtual ~CAADlgHelloApplication();
    void <b>BeginApplication</b>();
    int <b>EndApplication</b>();

};</pre>
    </td>
  </tr>
</table>
<p>We find here:
<ul>
  <li>the <i>CAADlgHelloApplication</i> class declaration which derives from the
    <i>CATInteractiveApplication</i> class</li>
  <li>its constructor and destructor</li>
  <li>the <code>BeginApplication</code> and <code>EndApplication</code> methods
    overridden from the <i>CATInteractiveApplication</i> class</li>
</ul>
<p>The CAADlgHelloApplication.cpp looks like that:</p>
<table class="code">
  <tr>
    <td>
      <pre>#include &quot;CAADlgHelloApplication.h&quot;
#include &quot;CAADlgHelloWindow.h&quot;

CAADlgHelloApplication::CAADlgHelloApplication(const CATString&amp; iIdentifier):
                        <b>CATInteractiveApplication</b>(NULL, iIdentifier) {}
                        
CAADlgHelloApplication::~CAADlgHelloApplication() {}

void CAADlgHelloApplication::<b>BeginApplication</b>() 
{
 
  CAADlgHelloWindow * pMainWindow = new <b>CAADlgHelloWindow</b>(this);

  pMainWindow-&gt;<b>Build</b>();

  pMainWindow-&gt;<b>SetVisibility</b>(CATDlgShow);
}

int CAADlgHelloApplication::<b>EndApplication</b>() 
{
  return(<b>0</b>);
}

CAADlgHelloApplication <b>ApplicationInstance</b>(&quot;Hello&quot;);</pre>
    </td>
  </tr>
</table>
<p>The constructor is empty. It leaves the constructors of the inherited classes
run, and it automatically runs the method <code>BeginApplication</code> which
constructs the application window and makes it
visible. The method <code>EndApplication</code> only returns 0 to state that all
is Ok . The application
run is just triggerred by the its instantiation in the last statement.</p>
<p align="right">[<a href="#Top">Top</a>]</p>

<!---------------------------------comment------------------------------------->

<h4><a name="Step2"></a>Creating the Application Window</h4>

<p>Let's look at CAADlgHelloWindow.h, the application window header file:</p>
<table class="code">
  <tr>
    <td>
      <pre>#include &quot;CATDlgDocument.h&quot;   

class CATInteractiveApplication;   

class CAADlgHelloWindow : public <b>CATDlgDocument</b>
{
 
  <b>DeclareResource</b>(CAADlgHelloWindow, CATDlgDocument)

  public:
 
    CAADlgHelloWindow(CATInteractiveApplication * iParentCommand);

    virtual ~CAADlgHelloWindow();

    void     <b>Build</b>();

  private:

    void <b>Exit</b> (CATCommand           * iSendingCommand, 
                CATNotification      * iSentNotification, 
                CATCommandClientData   iUsefulData);

  private:
    <b>CATInteractiveApplication</b> * _pHelloApplication;

    
};</pre>
    </td>
  </tr>
</table>
<p>We find here:
<ul>
  <li>The <i>CAADlgHelloWindow</i> class declaration which derives from the <i>CATDlgDocument</i>
    class</li>
  <li>The <code>DeclareResource</code> macro which allows to retrieve the class
    resources, such as character strings displayed in the window, from an
    external resource file</li>
  <li>The class constructor</li>
  <li>the <code>Build</code> method used to create and value the window
    components</li>
  <li>The <code>Exit</code> method used to close the application when the end
    user closes the window</li>
  <li>A reference to the application.</li>
</ul>
<p>The file CAADlgHelloWindow.cpp looks like that:</p>
<table class="code">
  <tr>
    <td>
      <pre>#include &quot;CAADlgHelloWindow.h&quot;

#include &quot;CATInteractiveApplication.h&quot; 
#include &quot;CATDlgInclude.h&quot;

CAADlgHelloWindow::CAADlgHelloWindow(CATInteractiveApplication * iParentCommand)                              
: <b>CATDlgDocument</b>(iParentCommand, &quot;CAADlgHelloWindowId&quot;),_pHelloApplication(iParentCommand)

{
}

CAADlgHelloWindow::~CAADlgHelloWindow()
{ 
  _pHelloApplication = NULL ;
}

void CAADlgHelloWindow::Build()
{
 
  CATDlgLabel * pLabel = new <b>CATDlgLabel</b>(this,&quot;MessageId&quot;);

  
  AddAnalyseNotificationCB(this,
                            GetWindCloseNotification(),
                           (CATCommandMethod)&amp;CAADlgHelloWindow::<b>Exit</b>, NULL);

}

void CAADlgHelloWindow::<b>Exit</b>(CATCommand         * iSendingCommand, 
                           CATNotification    * iSentNotification, 
                           CATCommandClientData iUsefulData)
{
   _pHelloApplication-&gt;<b>Destroy</b>();
   _pHelloApplication = NULL ;
}</pre>
    </td>
  </tr>
</table>
<p>The constructor for <i>CAADlgHelloWindow</i> only values the <code>_pHelloApplication</code>
data member. The <code>Build</code> method creates the message to display as a <i>CATDlgLabel</i>
instance, sets character string to display in the message, and registers the
method <code>Exit</code> to be called when the window is closed. This method
destroys the application. This also deletes the window. Always use a <code>Build</code>
method, and never instantiate dialog objects in the window constructor.
<p>The message file that contains the displayed messages is as follows.</p>
<table class="code">
  <tr>
    <td>
      <pre>Title           = &quot;Hello Application&quot;;
MessageId.Title = &quot;Hello, CAA V5&quot;;</pre>
    </td>
  </tr>
</table>
<p>The first message is the window title and has the simple key <code>Title</code>.
The second one is the displayed message and its key is built using the
identifier passed as second argument of the label constructor, concatenated with
a dot to the <code>Title</code> keyword.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>This use case enables you to have a first approach with the Dialog framework
concepts. In the <code>Build</code> method of the application window you can
test the Dialog objects [<a href="#References">4</a>]</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->

<h3><a name="References"></a>References</h3>
<table width="100%">
  <tr>
    <td valign="top">[1]</td>
    <td><a href="CAADlgBurger.htm">The Burger Order Dialog Box</a></td>
  </tr>
  <tr>
    <td valign="top">[2]</td>
    <td><a href="../CAADlgTechArticles/CAADlgInteractiveApplication.htm">Designing
      Your Interactive Application</a></td>
  </tr>
  <tr>
    <td valign="top">[3]</td>
    <td><a href="../CAADocUseCases/CAADocRunSample.htm">Building
      and Launching a CAA V5 Use Case</a></td>
  </tr>
  <tr>
    <td valign="top">[4]</td>
    <td><a href="../CAADlgTechArticles/CAADlgOverview.htm">Dialog
      Overview</a></td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="History"></a>History</h3>
<table width="100%">
  <tr>
    <td valign="top">Version: <strong>1</strong>  [Fev 2003]</td>
    <td valign="top">Document created</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2003, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>
