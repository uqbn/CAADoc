<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Using Query</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>&nbsp;Catalog Modeler</h1>
    </td>
    <td valign="top">
      <h2></h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>Using Query</h3>
      <em>&nbsp;Using CATICatalogQuery,CATICatalogQueryResult</em></td>
  </tr>
  <tr>
    <td class="use" colspan="2">Use Case</td>
  </tr>
</table>
<hr>

<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td>
      <h3>Abstract</h3>
      <p>This use case&nbsp;shows how to filter a chapter to retrieve specific descriptions.</p>     
      <ul>
        <li><a href="#Learn"><strong>What You Will Learn With This Use Case</strong></a></li>
        <li><a href="#UseCase"><strong>The CAACciCatalogQuery Use Case</strong></a>
          <ul>
            <li><a href="#What">What Does CAACciCatalogQuery Do</a></li>
            <li><a href="#How">How to Launch CAACciCatalogQuery</a></li>
            <li><a href="#Where">Where to Find the CAACciCatalogQuery Code</a></li>
          </ul>
        <li><a href="#Step"><strong>Step-by-Step</strong></a></li>
        <li><a href="#InShort"><strong>In Short</strong></a></li>
        <li><a href="#References"><strong>References</strong></a></li>
      </ul>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
<p>Users often need a way of storing and classifying the many objects they have
at their disposal, whether they be screws, ball bearings or computer parts.
These objects may number tens of thousands, each with its own specific
characteristics such as shape, color, size, diameter, length, etc. To facilitate
fast and easy retrieval of such objects thus objects avoiding time-wasting
redesign Version 5 offers the possibility of creating catalogs.&nbsp;</p>
<p>The catalog is made up of chapters. The chapters contains keywords to enhance
the classification. The goal of this article is to show the usage of two
interfaces:</p>
<ul>
  <li>&nbsp;<em>CATICatalogQuery&nbsp;</em></li>
</ul>
<blockquote>
  <p>This interface is implemented by the chapter and enables to filter its
  descriptions.</p>
</blockquote>
<ul>
  <li><em>CATICatalogQueryResult&nbsp;</em></li>
</ul>
<blockquote>
  <p>This interface is implemented by an object which is the result of the query
  applied to the chapter. On this object you retrieve the filtered descriptions.</p>
</blockquote>
<p>Before getting to the use case itself, it is important to already be familiar
with the basic notions of Catalog. See the referenced article [<a href="#References">1</a>]
for a detailed overview.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="UseCase"></a>The CAACciCatalogQuery Use Case</h3>
<p>CAACciCatalogQuery is a use case of the CAAComponentsCatalogs.edu framework that
illustrates ComponentsCatalogsInterfaces framework capabilities.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="What"></a>What Does CAACciCatalogQuery Do</h4>
<p>The &quot;Creating a Catalog&quot; use case [<a href="#References">2</a>] explains the creation of the <code>CAATool</code>
catalog.&nbsp;</p>
  
 <table width="430">
<caption><i><a name="Fig.1">Fig.</a>1 The CAATool.catalog Document</i></caption>
<tr>
<td width="422">
<img border="0" src="images/CAACciCatalogTool1.jpg" width="291" height="205">
</td>
</tr>
</table>
<p>This catalog contains the <code> Nuts</code> chapter which has the <code> SideNumber</code> keyword</p>
   <table width="466">
<caption><i><a name="Fig.2">Fig.2</a>: The Nuts's&nbsp; Keyword Tab
  Page</i></caption>
<tr>
<td width="458">
<img border="0" src="images/CAACciCatalogTool6.jpg" width="361" height="142">
</td>
</tr>
</table>
<p>This use case makes a query to filter the descriptions whose the &quot;<code>SideNumber</code>&quot;
keyword value is equal to 6.&nbsp;</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="How"></a>How to Launch CAACciCatalogQuery</h4>
<p>To launch CAACciCatalogQuery , you will need to set up the build time environment,
then compile the CAACciCatalogQuery module along with its prerequisites, set up the run time
environment, and then execute the use case [<a href="#References">3</a>].&nbsp;</p>
<p>mkrun -c <b>CAACciCatalogQuery</b> InputPath&nbsp;</p>
<p>Where:</p>
<b>InputPath</b> : The path of the <code>CAATool.catalog </code>file<p>You can use
those located in <code>CAA</code><code>ComponentsCatalogs</code><code>.edu/InputData</code>
</p>
    <ul>
      <li>Unix : <code>InstallRootDirectory/CAA</code><code>ComponentsCatalogs</code><code>.edu/InputData</code>
      <li>Windows : <code>InstallRootDirectory\CAA</code><code>ComponentsCatalogs</code><code>.edu\InputData</code></li>
    </ul>
    <p> where <code>InstallRootDirectory</code>  is the directory where the CAA
CD-ROM is installed.</p>
<p align="right">[<a href="#Top">Top</a>]</p>

<!---------------------------------comment------------------------------------->

<h4><a name="Where"></a>Where to Find the CAACciCatalogQuery Code</h4>
<p>The CAACciCatalogQuery use case is made of a file, <i>CAACciCatalogQueryMain.cpp</i>,
located in the CAACciCatalogQuery.m module of the CAAComponentsCatalogs.edu framework:</p>
<p>depending on operating system you find them :</p>
<table>
  <tr>
    <td>Windows</td>
    <td><code>InstallRootDirectory\CAA</code><code>ComponentsCatalogs</code><code>.edu\CAACciCatalogQuery.m\</code></td>
  </tr>
  <tr>
    <td>Unix</td>
    <td><code>InstallRootDirectory/CAA</code><code>ComponentsCatalogs</code><code>.edu/CAACciCatalogQuery.m/</code></td>
  </tr>
</table>
<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM
is installed.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="Step"></a>Step-by-Step</h3>
<p>In the<i>  CAACciCatalogQueryMain.cpp</i> file you have two mains steps</p>
<ol>
  <li><a href="#Retrieving the factory">Retrieving The Nuts chapter</a></li>
  <li><a href="#Retrieving chapters">Filtering The Nuts chapter</a></li>
</ol>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Retrieving the factory"></a>Retrieving the Nuts chapter</h4>
  
<p>The <code>CAATool </code>catalog contains the <code>Nuts </code>Chapter [<a href="#Fig.1">Fig
1</a>].
The <code>FindChapter </code>method retrieves it because it is not an external
chapter.&nbsp;</p>
  
<table class="code">
  <tr>
    <td>
      <pre> ...
  CATUnicodeString NutsChapter = &quot;Nuts&quot; ;
  CATICatalogChapter * piNutsChapter = NULL ;
  rc = pICatalogChapterFactory-&gt;<b>FindChapter</b>(NutsChapter,piNutsChapter);
 ...</pre>
    </td>
  </tr>
</table>
<p>Where <code>pICatalogChapterFactory</code> is the <i>CATICatalogChapterFactory</i>
interface pointer on the root container of the <code>CAATool</code> catalog. The
use case &quot;Creating a Catalog&quot; [<a href="#References">2</a>] explains
how to retrieve this pointer.</p>
  
<h4><a name="Retrieving chapters"></a>Filtering on a chapter&nbsp;</h4>
<p>A filtering on a chapter is done thanks to the <i> CATICatalogQuery</i>
interface .</p>
<table class="code">
  <tr>
    <td>
      <pre> ...
  <b>CATICatalogQuery</b> * piCatalogQueryOnNutsChapter = NULL ;
  rc = piNutsChapter-&gt;QueryInterface(IID_CATICatalogQuery,
                                     (void **) &amp;piCatalogQueryOnNutsChapter);
 ...</pre>
    </td>
  </tr>
</table>
<p>piCatalogQueryOnNutsChapter is the <i> CATICatalogQuery</i>
interface pointer on the <code>Nuts</code> Chapter.</p>

<p>The expression of the filter has a knowledgeware syntax:</p>

<table class="code">
  <tr>
    <td>
      <pre> ...
  CATUnicodeString Expression = &quot;<b>(x.SideNumber==6)</b>&quot;;
 ...</pre>
    </td>
  </tr>
</table>
<p>The other available operators are&nbsp;</p>
<ul>
  <li>+,-,*,/,(,),**,==,&lt;&gt;,&lt;,&gt;,&lt;=,&gt;=
  <li>abs,sqrt,cos,sin,tan,log,min,max ...
  <li>Search,Extract,Length,ToUpper ...
  <li>if ... then.., and,or,...</li>
</ul>
<p>In applying the <code>Query</code> method with the knowledgeware filter (<code>Expression</code>)
the result is a QueryResult object. This object implements the <i>CATICatalogQueryResult</i>
interface.</p>
<p>Advice: the <code>Query</code> method is not recursive. The research is done
on the descriptions of the chapter. It means that if descriptions have links
towards sub-chapters, the descriptions of those chapters are not explored.</p>
<table class="code">
  <tr>
    <td>
      <pre> ...
  CATICatalogQueryResult * pIQueryResult = NULL;
  rc = piCatalogQueryOnNutsChapter-&gt;<b>Query</b>(pIQueryResult,Expression);
 ...</pre>
    </td>
  </tr>
</table>
<p>The list of descriptions filtered by the expression is retrieved by the <code>AsAList</code>
method.</p>
<table class="code">
  <tr>
    <td>
      <pre> ...
  CATListValCATICatalogDescription_var * pListDescription = NULL;
  rc = pIQueryResult-&gt;<b>AsAList</b>(pListDescription);

 ...</pre>
    </td>
  </tr>
</table>

  <p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>This use case illustrates the usage of the <i>CATICatalogQuery</i> and <i>CATICatalogQueryResult</i>
interface.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->

<h3><a name="References"></a>References</h3>
<table width="896">
  <tr>
    <td valign="top" width="63">[1]</td>
    <td width="819"><a href="../CAACciTechArticles/CAACciCatalogOverview.htm">Catalog Overview</a></td>
  </tr>
  <tr>
    <td valign="top" width="63">[2]</td>
    <td width="819"><a href="CAACciCatalogCreationStructure.htm">Creating a
      Catalog</a></td>
  </tr>
  <tr>
    <td valign="top" width="63">[3]</td>
    <td width="819"><a href="../CAADocUseCases/CAADocRunSample.htm">Building
      and Launching a CAA V5 Use Case</a></td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2" width="888">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="History"></a>History</h3>
<table width="100%">
  <tr>
    <td valign="top">Version: <strong>1</strong>  [Jul 2002]</td>
    <td valign="top">Document created</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2002, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>
