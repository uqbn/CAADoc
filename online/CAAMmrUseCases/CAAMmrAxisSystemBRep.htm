<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Creating a Sketch on an Axis System Plane</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>Mechanical Modeler</h1>
    </td>
    <td valign="top">
      <h2></h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>Creating a Sketch on an Axis System Plane</h3>
      Using the axis system sub-elements&nbsp;</td>
  </tr>
  <tr>
    <td class="use" colspan="2">Use Case</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td>
      <h3>Abstract</h3>
      <p>This article shows how to use a sub-element of an axis system.&nbsp;
      <ul>
        <li><a href="#Learn"><strong>What You Will Learn With This Use Case</strong></a></li>
        <li><a href="#UseCase"><strong>The CAAMmrAxisSystemBRep Use Case</strong></a>
          <ul>
            <li><a href="#What">What Does CAAMmrAxisSystemBRep Do</a></li>
            <li><a href="#How">How to Launch CAAMmrAxisSystemBRep</a></li>
            <li><a href="#Where">Where to Find the CAAMmrAxisSystemBRep Code</a></li>
          </ul>
        <li><a href="#Step"><strong>Step-by-Step</strong></a></li>
        <li><a href="#InShort"><strong>In Short</strong></a></li>
        <li><a href="#References"><strong>References</strong></a></li>
      </ul>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
<p>An axis system is a feature whose the geometry consists in a vertex (the
origin), three edges (three axes) and three planes. There are the sub-elements. This use case is intended to show you how
to:</p>
<ul>
  <li>Retrieve the BRep object [<a href="#References">1</a>] associated with one
    of these sub-elements ,</li>
  <li>Create the BRep feature [<a href="#References">1</a>] from this BRep
    object,</li>
  <li>Create a Sketch based on the BRep feature.</li>
</ul>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="UseCase"></a>The CAAMmrAxisSystemBRep Use Case</h3>
<p>CAAMmrAxisSystemBRep is a use case of the CAAMechanicalModeler.edu framework that
illustrates MechanicalModeler framework capabilities.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="What"></a>What Does CAAMmrAxisSystemBRep Do</h4>
<p>CAAMmrAxisSystemBRep creates an axis system [<a href="#References">2</a>],
retrieves its XY plane , featurizes it and creates a sketch based on this
plane.&nbsp;</p>
<p>The characteristics of the axis system are the following:</p>
<table border="0">
<caption><i><a name="Fig.1">Fig.1</a>: The Axis System Characteristics</i></caption>

  <tr>
    <td>
    <img border="0" src="images/CAAMmrAxisSystemBRep1.jpg" width="518" height="567"></td>
      </tr>
</table>
<p>The sketch is based on the XY plane, it means in the xz plane of the absolute
axis system.</p>
<table border="0">
<caption><i><a name="Fig.2">Fig.2</a>: The Sketch Based on the XY Plane&nbsp;</i></caption>

  <tr>
    <td>
    <img border="0" src="images/CAAMmrAxisSystemBRep2.jpg" width="451" height="235"></td>
  </tr>
</table>
<p>The above picture is a screen print of the <code>CAAAxisSystemBRep</code>
Part document created by the CAAMmrAxisSystemBRep use case. You find it in the <code>CAAMechanicalModeler.edu/InputData
</code>directory&nbsp;</p>
<ul>
  <li>Unix : <code>InstallRootDirectory/CAAMechanicalModeler.edu/InputData</code>
  <li>Windows : <code>InstallRootDirectory\CAAMechanicalModeler.edu\InputData</code></li>
</ul>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="How"></a>How to Launch CAAMmrAxisSystemBRep</h4>
<p>To launch CAAMmrAxisSystemBRep , you will need to set up the build time environment,
then compile CAAMmrAxisSystemBRep along with its prerequisites, set up the run time
environment, and then execute the use case [<a href="#References">3</a>]. To
launch the use case execute the command:</p>
<p>mkrun -c CAAMmrAxisSystemBRep [Filename]</p>
<p>where <b> Filename</b> is the complete file name of the output Part document. If
no name
is given, the Part document, named CAAMmrAxisSystemBRep, is saved in the current directory.&nbsp;</p>
<p align="right">[<a href="#Top">Top</a>]</p>

<!---------------------------------comment------------------------------------->

<h4><a name="Where"></a>Where to Find the CAAMmrAxisSystemBRep Code</h4>
<p>The CAAMmrAxisSystemBRep use case is made of one module, CAAMmrAxisSystemBRep.m,&nbsp;
found in the the CAAMechanicalModeler.edu framework and containing a single
source program, CAAMmrTestBRep.cpp:</p>
<table>
  <tr>
    <td>Windows</td>
    <td><code>InstallRootDirectory\CAAMechanicalModeler.edu\CAAMmrAxisSystemBRep.m\</code></td>
  </tr>
  <tr>
    <td>Unix</td>
    <td><code>InstallRootDirectory/CAAMechanicalModeler.edu/CAAMmrAxisSystemBRep.m/</code></td>
  </tr>
</table>
<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM
is installed.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h3><a name="Step"></a>Step-by-Step</h3>
<p>There are seven logical steps in CAAMmrAxisSystemBRep:</p>
<ol>
  <li><a href="#Prolog">Prolog</a></li>
  <li><a href="#Retrieves the Factory Interface Pointers">Retrieves the Factory Interface Pointers</a></li>
  <li><a href="#Creates an Axis System">Creates an Axis System</a></li>
  <li><a href="#Retrieves the BRep Plane">Retrieves the BRep Plane</a></li>
  <li><a href="#Featurizes the BRep Plane">Features the BRep Plane</a></li>
  <li><a href="#Creates the Sketch">Creates the Sketch</a></li>
  <li><a href="#Epilog">Epilog</a></li>
</ol>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->

<h4><a name="Prolog"></a>Prolog</h4>
<p>CAAMmrAxisSystemBRep begins by creating a session, and creating a new Part
document. Next it retrieves the root container of this Part as a pointer to <i>CATIPrtContainer</i>,
<code>pIPrtContOnDocument.</code> This is the usual sequence for creating a Part
document [<a href="#References">4</a>].
<p align="right">[<a href="#Top">Top</a>]</p>

<!---------------------------------comment------------------------------------->

<h4><a name="Retrieves the Factory Interface Pointers"></a>Retrieves the Factory
Interface Pointers</h4>
<p>There are two factories to retrieve: the axis system and sketch factories.
The&nbsp; <i>CATIMf3DAxisSystemFactory</i> and <i>CATISketchFactory</i> are all
the two implemented by the root container, <code>pIPrtContOnDocument</code> the
specification container, of the Part document [<a href="#References">5</a>].</p>
<table class="code">
  <tr>
    <td>
      <pre>...
  <b>CATIMf3DAxisSystemFactory</b> * pIMf3DAxisSystemFactoryOnFeatCont = NULL ;
  rc = pIPrtContOnDocument-&gt;QueryInterface(IID_CATIMf3DAxisSystemFactory,
                                      (void **) &amp; pIMf3DAxisSystemFactoryOnFeatCont);</pre>
      <pre>  <b>CATISketchFactory</b> * pISketchFactoryOnFeatCont = NULL ;
  rc = pIPrtContOnDocument-&gt;QueryInterface(IID_CATISketchFactory,
                                      (void **) &amp; pISketchFactoryOnFeatCont);
...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<h4><a name="Creates an Axis System"></a>Creates an Axis System</h4>
<p>An axis system is created thanks to the <i>CATIMf3DAxisSystemFactory</i>
interface. <code>pIMf3DAxisSystemFactoryOnFeatCont </code>is the interface
pointer on the specification container of the Part document retrieved in the
previous section. The article entitled &quot;Creating an Axis System&quot; [<a href="#References">2</a>]
explains in details the axis system creation.&nbsp;</p>
<p>Here it is a simple axis system located in (100,0,0) in the absolute axis
system and with three axis directions set by mathematical vectors. The first two
axis directions, <code>Xdir</code>  and <code>Ydir</code>, are given, the third
is the vectorial product of the two firsts. <code>NewAxisSystem </code>is
consequently an right-handed axis system.&nbsp;</p>
<table class="code">
  <tr>
    <td>
      <pre>...
  CATMathPoint Origin (100.0,.0,.0);
  CATMathVector Xdir (1.0,0.0,.0);
  CATMathVector Ydir (0.0,0.0,1.0);

  <b>CATIMf3DAxisSystem_var</b> NewAxisSystem ;
  rc = pIMf3DAxisSystemFactoryOnFeatCont-&gt;<b>CreateAxisSystem</b>(Origin,Xdir,Ydir,NewAxisSystem);
 
...</pre>
    </td>
  </tr>
</table>
<p>Once the axis system is created, an update is launched to build the geometry.</p>
<table class="code">
  <tr>
    <td>
      <pre>...
  <b>CATISpecObject</b> * pSpecObjectOnAxisSystem = NULL ;
  rc =NewAxisSystem-&gt;QueryInterface(IID_CATISpecObject,(void **)&amp;pSpecObjectOnAxisSystem);

  <b>CATTry</b>
  {
     pSpecObjectOnAxisSystem-&gt;<b>Update</b>();
  }
  <b>CATCatch</b>(CATError,error)
  {
     cout&lt;&lt; error-&gt;GetNLSMessage().CastToCharPtr() &lt;&lt; endl;
     Flush(error);
     return 1 ;
  }
  <b>CATEndTry</b>

  pSpecObjectOnAxisSystem-&gt;Release();
  pSpecObjectOnAxisSystem= NULL;
...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<h4><a name="Retrieves the BRep Plane"></a>Retrieves the BRep Plane</h4>
<p>Once the axis system has been updated, and its geometry computed, it is
possible to retrieve one of its sub-element.&nbsp;</p>
<table class="code">
  <tr>
    <td>
      <pre>...
  <b>CATIBRepAccess_var</b> PlaneBRep ;
  rc = NewAxisSystem-&gt;<b>GetPlaneBRepAccess</b>(CATAxisSystemZNumber,PlaneBRep);
...</pre>
    </td>
  </tr>
</table>
<p>The <code>GetPlaneBRepAccess</code> method retrieves a plane of the axis
system. The first argument of the method, a <i>CATAxisSystemXYZNumber</i> value,
specifies which. With <code>CATAxisSystemZNumber,</code> it is the XY plane, in
other words the plane defined by the X and the Y axis directions.&nbsp;</p>
<p><code>PlaneBRep</code> is a temporary handler on the plane cell. It is an
object of selection [<a href="#References">1</a>] usually named a BRep object.
The <i>CATIBRepAccess</i> interface manages the BRep objects.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<h4><a name="Featurizes the BRep Plane"></a>Featurizes the BRep Plane</h4>
<p>To be used as specification, the BRep plane, <code>PlaneBRep</code>, should
be featurized. The new feature, <code>MFPlane</code>, is called the BRep
feature. The <i>CATIFeaturize</i> interface enables you to do this
transformation. The shape of the plane being not important, a featurization with
the functional mode is sufficient. Consequently, the <code>FeaturizeF </code>method&nbsp;is
used.</p>
<table class="code">
  <tr>
    <td>
      <pre>...
  <b>CATIFeaturize</b> * pIFeaturizeOnPlane = NULL ;
  rc = PlaneBRep-&gt;QueryInterface(IID_CATIFeaturize,(void **) &amp;pIFeaturizeOnPlane);
  ...
  CATISpecObject_var MFPlane = pIFeaturizeOnPlane-&gt;<b>FeaturizeF</b>();
...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<h4><a name="Creates the Sketch"></a>Creates the Sketch</h4>
<p>The sketch is created thanks to the factory retrieved in the &quot;<a href="#Retrieves the Factory Interface Pointers">Retrieves the Factory
Interface Pointers</a>&quot; section. <code>MFPlane</code> is the BRep feature
support of the sketch. [<a href="#References">6</a>]</p>
<table class="code">
  <tr>
    <td>
      <pre>...
CATISpecObject_var NewSketch = pISketchFactoryOnFeatCont-&gt;<b>CreateSketch</b>(MFPlane);
...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<h4><a name="Epilog"></a>Epilog</h4>
<p>The last actions of the use case are the following: save as the Part document,
close it and delete the session. It is also described in the Creating a New
Document use case [<a href="#References">4</a>].</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="right">&nbsp;</p>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>This use case explains how to create a sketch based on an axis system's
plane.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->

<h3><a name="References"></a>References</h3>
<table width="100%">
  <tr>
    <td valign="top">[1]</td>
    <td><a href="../CAAMmrTechArticles/CAAMmrGenericNaming.htm">Generic
      Naming</a></td>
  </tr>
  <tr>
    <td valign="top">[2]</td>
    <td><a href="CAAMmrAxisSystemCreation.htm">Creating Axis Systems</a></td>
  </tr>
  <tr>
    <td valign="top">[3]</td>
    <td><a href="../CAADocUseCases/CAADocRunSample.htm">Building
      and Launching a CAA V5 Use Case</a></td>
  </tr>
  <tr>
    <td valign="top">[4]</td>
    <td><a href="../CAAOmbUseCases/CAAOmbNewDoc.htm">Creating a New Document</a></td>
  </tr>
  <tr>
    <td valign="top">[5]</td>
    <td><a href="../CAAMmrTechArticles/CAAMmrStructurePartDoc.htm">The
      Structure of a Part Document</a></td>
  </tr>
  <tr>
    <td valign="top">[6]</td>
    <td>Creating Sketching Elements in a Part Document</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="History"></a>History</h3>
<table width="100%">
  <tr>
    <td valign="top">Version: <strong>1</strong>  [Apr 2003]</td>
    <td valign="top">Document created</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2003, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>

