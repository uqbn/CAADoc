<html>

 <head>
 <meta http-equiv="Content-Language" content="en-us">
 <meta name="GENERATOR" content="Microsoft FrontPage 5.0">
 <meta name="ProgId" content="FrontPage.Editor.Document">
 <link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
 <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Testing integration to Knowledge</title>
 </head>

 <body>

 <table width="100%">
   <tr>
     <td valign="top">
     <h1>3D PLM PPR Hub Open Gateway</h1>
     </td>
     <td>
     <h2>Knowledge Modeler</h2>
     </td>
     <td rowspan="2" align="right" valign="top">
     <h3><a name="Top"></a>Test Your Integration with the Knowledge Language</h3>
     <p><font face="Arial" size="2"><em>A very basic application manipulating 
     user types, methods and Objects</em></font></td>
   </tr>
   <tr>
     <td class="use" colspan="2"><font face="Arial" size="2">Use Case</font></td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <table class="abstract">
   <tr>
     <td>
     <h3><font face="Arial" size="2">Abstract</font></h3>
     <p><font face="Arial" size="2">This article discusses the 
     CAALifTestIntegrateKnowledge use case. If you have done what is necessary 
     to integrate some of your applicative types, object and functions [<a href="#References">1</a>], 
     you will be able to use them in the Knowledge language and to look at them 
     in the Search functionality.</font></p>
     <p><font face="Arial" size="2">But At first time, you may want to test your 
     integration. This is what illustrates this use case: how to manipulate your 
     applicative objects and user functions.</font></p>
     <ul>
       <li><font face="Arial" size="2"><a href="#Learn"><strong>What You Will 
       Learn With This Use Case</strong></a></font></li>
       <li><font face="Arial" size="2"><a href="#UseCase"><strong>The 
       CAALifTestIntegrateKnowledge Use Case</strong></a> </font>
       <ul>
         <li><font face="Arial" size="2"><a href="#What">What Does </a>
         <a href="#UseCase"><strong style="font-weight: 400">
         CAALifTestIntegrateKnowledge</strong></a><a href="#What"> Do</a></font></li>
         <li><font face="Arial" size="2"><a href="#How">How to Launch </a>
         <a href="#UseCase"><strong style="font-weight: 400">
         CAALifTestIntegrateKnowledge</strong></a></font></li>
         <li><font face="Arial" size="2"><a href="#Where">Where to Find the 
         CAALifTestIntegrateKnowledge Code</a></font></li>
       </ul>
       </li>
       <li><font face="Arial" size="2"><a href="#Step"><strong>Step-by-Step</strong></a></font></li>
       <li><font face="Arial" size="2"><a href="#InShort"><strong>In Short</strong></a></font></li>
       <li><font face="Arial" size="2"><a href="#References"><strong>References</strong></a></font></li>
     </ul>
     </td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="Learn"><font size="3"></font></a><font face="Arial" size="3">What 
 You Will Learn With This Use Case</font></h3>
 <p><font face="Arial" size="2">This use case is intended to show you how to 
 manage user types, objects and functions in order to test that your integration 
 to Knowledge language is correct.</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h3><font face="Arial" size="2"><a name="UseCase"></a></font>
 <font face="Arial" size="3">The CAALifTestIntegrateKnowledge Use Case</font></h3>
 <p><font face="Arial" size="2">CAALifTestIntegrateKnowledge is a use case of 
 the CAALiteralFeatures.edu framework that illustrates KnowledgeInterfaces 
 framework capabilities.</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h4><font face="Arial" size="2"><a name="What"></a></font><font face="Arial">
 What Does CAALifTestIntegrateKnowledge Do</font></h4>
 <p><font face="Arial" size="2">CAALifTestIntegrateKnowledge gives you a feel of 
 how you can load a package and search types in it. Then it instanciates a 
 feature from a startup <b><i>CAALifFeatureScrew</i></b> and valuates its 3 
 parameters length attributes. Then from this feature, we get a handler on the 
 interface <i><b>CATIInstance</b></i>&nbsp; in order to manipulate this object 
 through the user view which has been defined in the context of the technical 
 article [<a href="#References">1</a>].</font></p>
 <p><font face="Arial" size="2">The implementation of the object user view is 
 located in the <i><b>CAALif</b></i><b><i>IntegrateKnowledge</i></b> library. It 
 contains a package <i>DotItYourself</i>, 2 types <i>Screw</i> and <i>Bolt</i> 
 with their attributes and a user method calculating the volume of a screw.</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h4><font face="Arial"><a name="How"></a>How to Launch 
 CAALifTestIntegrateKnowledge </font></h4>
 <p><font face="Arial" size="2">To launch CAALifTestIntegrateKnowledge, you will 
 need to set up the build time environment, then compile 
 CAALifTestIntegrateKnowledge along with its prerequisites, set up the run time 
 environment, and then execute the use case [<a href="#References">2</a>] . To 
 Launch the use case execute the command:</font></p>
 <p><font face="Arial" size="2">mkrun -c CAALifTestIntegrateKnowledge</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h4><font face="Arial"><a name="Where"></a>Where to Find the 
 CAALifTestIntegrateKnowledge Code</font></h4>
 <p><font face="Arial" size="2">The CAALifTestIntegrateKnowledge use case is 
 made of a source file named CAALifTestIntegrateKnowledge.cpp located in the 
 CAALifTestIntegrateKnowledge.m module of the CAALiteralFeatures.edu framework:</font></p>
 <table>
   <tr>
     <td><font face="Arial" size="2">Windows</font></td>
     <td><code><font face="Arial" size="2">
     InstallRootDirectory\CAALiteralFeatures.edu\</font></code><font face="Arial" size="2">CAALifTestIntegrateKnowledge</font><font face="Arial"><code><font size="2">.m</font></code></font><font size="2"></font><font face="Arial"><code><font size="2">\</font></code></font></td>
   </tr>
   <tr>
     <td><font face="Arial" size="2">Unix</font></td>
     <td><code><font face="Arial" size="2">
     InstallRootDirectory/CAALiteralFeatures.edu/</font></code><font face="Arial" size="2">CAALifTestIntegrateKnowledge</font><font face="Arial"><code><font size="2">.m</font></code></font><font size="2"></font><font face="Arial"><code><font size="2">/</font></code></font></td>
   </tr>
 </table>
 <p><font size="2" face="Arial">where </font><font size="2"><code>
 <font face="Arial">InstallRootDirectory</font></code></font><font size="2" face="Arial"> 
 is the directory where the CAA CD-ROM is installed.</font></p>
 <p><font face="Arial" size="2">The use case is running thanks to the library 
 CAALifIntegrateKnowledge, which code is located in the 
 CAALifIntegrateKnowledge.m module of the CAALiteralFeatures.edu framework.</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h3><font face="Arial" size="3"><a name="Step"></a>Step-by-Step</font></h3>
 <p><font face="Arial" size="2">The main steps if CAALifTestIntegrateKnowledge 
 are:</font></p>
 <ol>
   <li><font face="Arial" size="2"><a href="#Step1">Prolog</a><br>
   This step creates a session, a Part document, open a given catalog and 
   retrieves from the catalog a startup <i><b>CAALifFeatureScrew</b></i> in 
   order to instanciate a feature Screw.</font></li>
   <li><font face="Arial" size="2"><a href="#Step2">Loading a package and 
   getting types</a><br>
   This step activates the package <i>DoItYourself</i> in the session to make 
   its associated types available.</font></li>
   <li><a href="#Step3"><font face="Arial" size="2">Creating an object Screw</font></a><font size="2" face="Arial"><br>
   This step instanciates a feature Screw and valuates its attributes with 3 
   parameters.</font></li>
   <li><font face="Arial" size="2"><a href="#Step4">Manipulating the object with 
   CATIInstance</a><br>
   This step creates a handler of the Screw on the interface CATIInstance and 
   uses its services.</font></li>
   <li><font face="Arial" size="2"><a href="#Step5">Listing methods in a package 
   and evaluate a user function</a></font></li>
   <li><font face="Arial" size="2"><a href="#Step6">Epilog</a><br>
   This step closes the document and the session.</font></li>
 </ol>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h4><font face="Arial" size="2"><a name="Step1"></a>Prolog</font></h4>
 <p><font face="Arial" size="2">Before going any further, you must initialize 
 your environment.</font></p>
 <p><font face="Arial" size="2">This task consists in:&nbsp;&nbsp;&nbsp; </font>
 </p>
 <ul>
   <li><font size="2" face="Arial">Creating a session. This is done by the
   </font><b><code><font face="Arial">CAALifInitSession</font></code></b><font size="2" face="Arial"> 
   method of the <i>CAALifServices</i> class defined in the CAALifBasis.m 
   module.</font></li>
 </ul>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Courier New">CAALifServices CAAliteralFeaturesServices; 
...
HRESULT rc = CAAliteralFeaturesServices.CAALifInitSession ();</font></pre>
     </td>
   </tr>
 </table>
 <ul>
   <li><font size="2" face="Arial">Creating a part document and retrieving its 
   root container through a literal factory interface. This is done by the
   </font><b><code><font face="Arial" size="2">CAALifCreateInstanceContainer</font></code></b><font size="2" face="Arial"> 
   method of the <i>CAALifServices</i> class and that returns a <i>CATIContainer</i> 
   interface smart pointer.</font></li>
 </ul>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Courier New">CATIContainer* piContainer = NULL;</font><font size="2" face="Arial"> <a name="container"></a></font><font face="Courier New">

<b>...
</b>rc = CAAliteralFeaturesServices.CAALifCreateInstanceContainer(&amp;piContainer);</font></pre>
     </td>
   </tr>
 </table>
 <ul>
   <li><font face="Arial" size="2">Getting the startup catalog 
   CAA2_CAALifFeatCatalog in the container. This is done by the <b>
   CAALifOpenCatalogFromContainer</b> method of the <i>CAALifServices</i> class.</font></li>
 </ul>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Courier New">CATICatalog* piCatalog = NULL;</font></pre>
     <pre><font face="Courier New">.<b>..
</b>rc = CAAliteralFeaturesServices.CAALifOpenCatalogFromContainer(piContainer,&quot;CAA2_CAALifFeatCatalog.CATfct&quot;,&amp;piCatalog);</font></pre>
     </td>
   </tr>
 </table>
 <ul>
   <li><font face="Arial" size="2">Retrieving the wanted startup <b>
   &quot;CAALifFeatureScrew&quot; </b>in the previous catalog in a <i>CATISpecObject</i> 
   interface smart pointer. This is done by the </font><b>
   <font face="Arial" size="2">CAALifRetrieveStartupFromCatalog</font></b><font face="Arial" size="2"> 
   method of the <i>CAALifServices</i> class.</font></li>
 </ul>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Courier New">CATUnicodeString startupType( &quot;CAALifFeatureScre<b>w&quot; ); </b></font><font face="Courier New"><b>
</b>CATISpecObject* piStartupFeat = NULL;</font><font face="Arial" size="2"> <a name="startup"></a></font><font face="Courier New"><b>
...
r</b>c = CAAliteralFeaturesServices.CAALifRetrieveStartupFromCatalog(piCatalog, startupType,&amp;piStartupFeat); </font></pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">&nbsp;&nbsp;&nbsp; The CAALifFeatureScrew 
 startup has been created thanks to the </font><b><code>
 <font face="Arial" size="2">CAALifCreateStartUps</font></code></b><font face="Arial" size="2"> 
 method of the <i>CAALifFeatureCatalog</i> class defined in the 
 CAALifFeatureCatalog.m module.</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h4><font face="Arial" size="2"><a name="Step2"></a>Loading a Package and 
 Getting Types</font></h4>
 <p><font face="Arial" size="2">To manage packages and types use the <b><i>
 CATITypeDictionary</i> </b>interface which is dedicated to accessing the unique 
 dictionary of types shown to the user. To retrieve a smart pointer on it, you 
 can use the static </font><code><font face="Arial">GetTypeDictionary</font></code><font face="Arial" size="2"> 
 method of the <b><i>CATGlobalFunction</i></b> class of KnowledgeInterfaces.</font></p>
 <p><font face="Arial" size="2">The method </font><font face="Arial"><code>
 LoadPackage</code></font><font face="Arial" size="2"> load the package which 
 name is given in argument if it isn't already done. The loading process is 
 described in the corresponding technical article [<a href="#References">1</a>].</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Arial">  </font><font face="Courier New"> ...
  CATITypeDictionary_var dico = <b>CATGlobalFunctions::GetTypeDictionary()</b>;<a name="dico"></a>
  CATUnicodeString package_name = &quot;DoItYourself&quot;;<a name="Package"></a>
  rc = dico-&gt;LoadPackage(package_name);
  ...	</font></pre>
     </td>
   </tr>
 </table>
 <!---------------------------------comment------------------------------------->
 <h4><span style="font-weight: 400"><font face="Arial" size="2">You can access 
 types from different manners: </font></span></h4>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Arial">    </font><font face="Courier New">...
  CATListValCATIType_var listTypes;
  dico-&gt;ListTypesForPackage(package_name,listTypes,0);
  ...</font></pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">or </font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre><font face="Arial">    </font><font face="Courier New">...</font></pre>
     <pre><font face="Courier New">  CATIType_var ScrewType;
  rc = <a href="#dico">dico</a>-&gt;FindType(&quot;Screw&quot;,ScrewType);
  ...</font></pre>
     </td>
   </tr>
 </table>
 <h4 align="right"><span style="font-weight: 400"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></span></h4>
 <h4><a name="Step3"></a><font face="Arial" size="2">Creating an Object Screw</font></h4>
 <p><font face="Arial" size="2">First, we instanciate a feature from its 
 startup.</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>CATISpecObject* ScrewObj = <a href="#startup">piStartupFeat</a>-&gt;Instanciate (&quot;my_screw_obj&quot;,<a href="#container">piContainer</a>);<a name="ScrewObject"></a>
</pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">Then, we valuate the attributes of this 
 instance. In the following code we valuate the attribute &quot;ScrewLength&quot; of
 </font><font face="Arial"><code>ScrewObj</code></font><font face="Arial" size="2"> 
 with a parameter of type length </font><font face="Arial"><code>length_parm</code>:</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  ...</pre>
     <pre>  CATICkeParm_var <b>length_parm</b> = ...
</pre>
     <pre>  ...</pre>
     <pre>  CATISpecAttrAccess * piSpecAttrAccessOnScrewLength = NULL; 
  rc = ScrewObj-&gt;QueryInterface(IID_CATISpecAttrAccess, (void**) &amp; piSpecAttrAccessOnScrewLength);
</pre>
     <pre>  if ( SUCCEEDED(rc) ) 
  { 
    CATISpecAttrKey * piSpecAttrKeyOnScrewLength = NULL; 
    piSpecAttrKeyOnScrewLength = piSpecAttrAccessOnScrewLength-&gt;GetAttrKey(&quot;<b>ScrewLength</b>&quot;);

    if ( NULL != piSpecAttrKeyOnScrewLength )
    {
      <b>piSpecAttrAccessOnScrewLength-&gt;SetSpecObject(piSpecAttrKeyOnScrewLength,length_parm)</b>;
      piSpecAttrKeyOnScrewLength-&gt;Release();
      piSpecAttrKeyOnScrewLength = NULL;
    }
  }
  piSpecAttrAccessOnScrewLength-&gt;Release();
  piSpecAttrAccessOnScrewLength = NULL;

  ...</pre>
     </td>
   </tr>
 </table>
 <p align="right"><font face="Arial" size="2"><a href="#Top">Top</a>]</font></p>
 <!---------------------------------comment------------------------------------->
 <h4><a name="Step4"></a><font face="Arial" size="2">Manipulating the Object 
 with CATIInstance</font></h4>
 <p><font face="Webdings" size="2">= </font><font face="Arial" size="2">Now that 
 we have a feature object (it could have been a C++ object too), we want to see 
 it through the user view which has bee defined on purpose. For That we have to 
 get a handler on the <i><b>CATIInstance</b></i> interface for our &quot;Screw&quot;.</font></p>
 <p>&nbsp;</p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  
  CATIInstance* <b>piInstance</b> = NULL;<a name="instance"></a>
  rc = ScrewObj-&gt;QueryInterface(IID_CATIInstance, (void**) &amp;piInstance);
</pre>
     </td>
   </tr>
 </table>
 <p><font face="Webdings" size="2">= </font><font face="Arial" size="2">Let's 
 check the type of the object. It must be a &quot;Screw&quot;.</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  
  CATIType* TypeInDico = piInstance-&gt;Type(); 
  ...</pre>
     <pre>  CATUnicodeString TypeName = TypeInDico-&gt;Name();</pre>
     <pre>  if (TypeName != &quot;Screw&quot;)
 	...</pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">&nbsp;Is it in the correct package <i>DoItYourself</i> 
 ?</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  
  CATIType_var TypeInPackage = NULL_var;
  rc = <a href="#dico">dico</a>-&gt;FindTypeInPackage(TypeName,<a href="#Package">package_name</a>,TypeInPackage);
  ...</pre>
     </td>
   </tr>
 </table>
 <p>&nbsp;</p>
 <p><font face="Webdings" size="2">= </font><font face="Arial" size="2">To 
 manipulate the attributes of this instance, there are 2 methods <i>GetValue</i> 
 and <i>SetValue</i> which manipulate <i><b>CATIValue</b></i>. </font></p>
 <p><font face="Arial" size="2">This interface is a union of different types of 
 object. It can be values (parameters) or features (in features, we include List 
 of features).</font></p>
 <p><font face="Arial" size="2">To <b>Get</b> an attribute &quot;<b><font color="#0000FF">ScrewLength</font></b>&quot; 
 containing a length value do it this way:</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  CATIValue_var value = <a href="#instance">piInstance</a>-&gt;GetValue(&quot;ScrewLength&quot;);
  if (value != NULL_var)
  {
    value-&gt;Release(); 

    if (value-&gt;AsReal() != 5.0)
    	...
    
  }</pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">The method </font><font face="Arial"><code>
 GetValue</code></font><font face="Arial" size="2"> of <i><b>CATIInstance</b></i> 
 takes in argument the name of the wanted attribute which has been defined in 
 the object user user view. It returns a <i><b>CATIValue</b></i>*. Consequently, 
 the smart pointer value has to be released once. In this example, the value of 
 the attribute is a parameter length and it can be directly accessed with the 
 method <i>AsReal</i> of <i><b>CATIValue</b></i>. Then we check that the 
 numerical value returned by the </font><font face="Arial"><code>GetValue </code>
 </font><font face="Arial" size="2">method is correct.</font></p>
 <p><font face="Arial" size="2">To <b>Get</b> an attribute &quot;<b><font color="#0000FF">CenterPoint</font></b>&quot; 
 containing a feature point do it this way :</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  ...</pre>
     <pre>  value = <a href="#instance">piInstance</a>-&gt;GetValue(&quot;CenterPoint&quot;);
  if (value != NULL_var)
  {
    value-&gt;Release();

    CATIGSMPointCoord_var point = NULL_var;

    point = value-&gt;AsObject();</pre>
     <pre>    //test of the point coordinates
  }</pre>
     <pre>  ...</pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">In the following example, the <i><b>CATIValue</b></i>&nbsp; 
 is a feature which we access with the method </font><font face="Arial"><code>
 AsObject</code></font><font face="Arial" size="2"> of <i><b>CATIValue</b></i>.</font></p>
 <p><font face="Arial" size="2">To <b>Set</b> an attribute &quot;<b><font color="#0000FF">ScrewLength</font></b>&quot; 
 with a length value do it this way:</font></p>
 <table class="code" width="799">
   <tr>
     <td width="793" bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  ...</pre>
     <pre>  CATICkeParmFactory_var VolFactory = <b>CATCkeGlobalFunctions::GetVolatileFactory()</b>;<a name="volatilefact"></a>
  if(VolFactory == NULL_var) ...

  rc = <a href="#instance">piInstance</a>-&gt;SetValue(&quot;ScrewLength&quot;, <b>VolFactory</b>-&gt;CreateLength(&quot;L1&quot;,15.23));
 </pre>
     <pre>  ...</pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">To <b>Set</b> an attribute &quot;<font color="#0000FF"><b>CenterPoint</b></font>&quot; 
 with a feature point do it this way:</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  ...</pre>
     <pre>  <a href="#instance">piInstance</a>-&gt;SetValue(&quot;CenterPoint&quot;, <b>VolFactory</b>-&gt;CreateObjectReference(GSMPt));
</pre>
     <pre>  ...</pre>
     </td>
   </tr>
 </table>
 <p><font face="Arial" size="2">The methods </font><font face="Arial"><code>
 CreateObjectReference</code></font><font face="Arial" size="2"> or </font>
 <font face="Arial"><code>CreateLength</code></font><font face="Arial" size="2"> 
 of the volatile factory </font><b><code>VolFactory</code></b><font face="Arial" size="2">, 
 create a temporary <i>CATIValue</i> handle on your feature point or on a 
 numerical value, just to give it in argument to the </font><font face="Arial">
 <code>SetValue</code></font><font face="Arial" size="2"> method.</font></p>
 <p><font face="Arial" size="2"><b>Remark</b>: The code to manage feature 
 attributes will be available in a use case of Mechanical Modeler from a future 
 Service Pack of the V5R14.</font></p>
 <p>&nbsp;</p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <p align="left"><b><font face="Arial" size="2"><a name="Step5"></a>Listing 
 Methods in a package</font></b></p>
 <p align="left"><font face="Arial" size="2">Let's check the existence of the 
 user function which has been defined in the package 
 CATPackageMethodDoItYourself in the library CAALifIntegrateKnowledge [<a href="#References">1</a>].</font></p>
 <p align="left"><font face="Arial" size="2">First, we list the user functions 
 and methods of the package.</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  CATListValCATBaseUnknown_var listOfSignatures;
  rc = <a href="#dico">dico</a>-&gt;ListMethodsForPackage(&quot;<b>CATPackageMethodDoItYourself</b>&quot;, listOfSignatures);
  if (SUCCEEDED(rc))
  {

    int nbOfMethods = listOfSignatures.Size();
    ...</pre>
     <pre>    CATICkeSignature_var aSignature;
    CATUnicodeString name;</pre>
     <pre>    for (i=1;i&lt;=nbOfMethods ;i++)</pre>
     <pre>    {</pre>
     <pre>    	aSignature = listOfSignatures[i];
    	name = aSignature-&gt;Name();</pre>
     <pre>	...</pre>
     </td>
   </tr>
 </table>
 <!---------------------------------comment------------------------------------->
 <h4><font face="Arial" size="2"><span style="font-weight: 400">Then we create a 
 formula to test the evaluation of the user function </span>EvaluateScrewVolume<span style="font-weight: 400"> 
 : volume = EvaluateScrewVolume(My_Screw).</span></font></h4>
 <p><font face="Arial" size="2">In the following code, </font>
 <font face="Arial"><code>spVolume</code></font><font face="Arial" size="2"> is 
 a parameter which will be valuated by the new formula. </font>
 <font face="Arial"><code>ScrewObj</code></font><font face="Arial" size="2"> is 
 the SpecObject result of the instanciation of the startup CAALifFeatureScrew.
 </font><font face="Arial"><code>ScrewParm</code></font><font face="Arial" size="2"> 
 is the transformation of ScrewObj in a parameter.</font></p>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  
    CATICkeParm_var spVolume = ...;

    CATICkeParm_var ScrewParm = <a href="#volatilefact">VolFactory</a>-&gt;CreateObjectReference(<a href="#ScrewObject">ScrewObj</a>);

    CATCkeListOf(Parm) pParamList;
    pParamList.Append (spVolume); 
    pParamList.Append (ScrewParm);

    CATICkeRelation_var spFormula = piFact-&gt;CreateFormula (&quot;VolumeFormula&quot;,
                                                           &quot;&quot;,
                                                           &quot;&quot;, 
                                                           spVolume, 
                                                           &amp;pParamList,
                                                           &quot;EvaluateScrewVolume(a2)&quot;,
                                                           NULL_var,
                                                           CATCke::False);
  ...</pre>
     </td>
   </tr>
 </table>
 <h4><span style="font-weight: 400"><font face="Arial" size="2">To run the user 
 function, change an attribute of the screw and evaluate the formula.</font></span></h4>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  ...
  spFormula-&gt;SetNotUpdated(ScrewParm);
  spFormula-&gt;Evaluate();</pre>
     <pre>  ...</pre>
     </td>
   </tr>
 </table>
 <h4><a name="Step6"></a><font face="Arial" size="2">Epilog</font></h4>
 <table class="code">
   <tr>
     <td bgcolor="#C0C0C0" bordercolor="#C0C0C0">
     <pre>  ...
  rc = services.<b>CAALifCloseSession</b>();
  return rc;
}</pre>
     </td>
   </tr>
 </table>
 <p><font size="2" face="Arial">The </font><i><code><font face="Arial" size="2">
 CAALifCloseSession</font></code></i><font size="2" face="Arial"> method of the
 <i><b>CAALifServices</b></i> class defined in the CAALifBasis.m module removes 
 the Part document and deletes the session.</font></p>
 <p align="right"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></p>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="InShort"></a><font face="Arial" size="3">In Short</font></h3>
 <p><font face="Arial" size="2">The Knowledgeware allows to integrate your own 
 types, objects, functions or method in oder to create a simplified user view of 
 your data.</font></p>
 <p><font face="Arial" size="2">For that, you have to create a few ressources 
 files and to implement the interfaces <i><b>CATIAddTypeLibrary</b>, <b>
 CATICreateInstance</b> </i>and<i> <b>CATIInstance</b>.</i></font></p>
 <p><font face="Arial" size="2">Afterwards, your object user view will be 
 accessible in the Search functionality and&nbsp; understood in the Knowledge 
 language.</font></p>
 <p>&nbsp;</p>
 <h3 align="right"><span style="font-weight: 400"><font face="Arial" size="2">[<a href="#Top">Top</a>]</font></span></h3>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><a name="References"></a><font face="Arial" size="3">References</font></h3>
 <table width="100%">
   <tr>
     <td valign="top"><font face="Arial" size="2">[1]</font></td>
     <td><font face="Arial" size="2">
     <a href="../CAALifTechArticles/CAALifObjectUserViewArticle.htm">
     Technical Article - </a></font>
     <a href="../CAALifTechArticles/CAALifObjectUserViewArticle.htm">
     <font face="Arial" size="2">Knowledge Language Integration</font></a></td>
   </tr>
   <tr>
     <td valign="top"><font face="Arial" size="2">[2]</font></td>
     <td><font face="Arial" size="2">
     <a href="../CAADocUseCases/CAADocRunSample.htm">
     Building and Lauching CAA V5 Samples</a></font></td>
   </tr>
   <tr>
     <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <h3><font face="Arial" size="3"><a name="History"></a>History</font></h3>
 <table width="100%">
   <tr>
     <td valign="top">Version: <strong>1</strong> [Nov 2003]</td>
     <td valign="top">Document created</td>
   </tr>
   <tr>
     <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
   </tr>
 </table>
 <hr>
 <!---------------------------------comment------------------------------------->
 <p><i>Copyright © 2000, Dassault Systèmes. All rights reserved.</i></p>

 </body>

</html>
