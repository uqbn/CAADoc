<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Retrieving the Active Plane</title>
</head>

<body>

<table width="100%">
  <tr>
    <td valign="top">
      <h1>Equipment &amp; Systems Engineering</h1>
    </td>
    <td valign="top">
      <h2>Electrical Harness Flattening</h2>
    </td>
    <td rowspan="2" align="right" valign="top">
      <h3><a name="Top"></a>Arranging junctions</h3>
      <i>How to arrange junctions</i></td>
  </tr>
  <tr>
    <td class="use" colspan="2">Use Case</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<table width="100%">
  <tr>
    <td bgcolor="#F0F0FF">
      <h3>Abstract</h3>
      <p>This article discusses the ElecFlatteningItf use case. This use case 
		explains how to arrange junctions</p>
      <ul>
        <li><b><a href="#Learn">What You Will Learn With This Use Case</a></b></li>
        <li><b><a href="#UseCase">The CAAEhfUIPArrangeJunction Use Case</a></b>
          <ul>
            <li><a href="#What">What does CAAEhfUIPArrangeJunction do</a></li>
            <li><a href="#How">How to Launch CAAEhfUIPArrangeJunction</a></li>
            <li><a href="#Where">Where to Find the CAAEhfUIPArrangeJunction
              code</a></li>
          </ul>
        </li>
        <li><a href="#Step"><b>Step-by-Step</b></a></li>
        <li><b><a href="#InShort">In Short</a></b></li>
        <li><b><a href="#history">History</a></b></li>
      </ul>
    </td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="Learn"></a>What You Will Learn With This Use Case</h3>
<p>This use case is intended to help you make your first steps in programming
with CATIA EHF Interfaces.&nbsp;Its main intent is to allow you to arrange 
junctions.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h3><a name="UseCase"></a>The CAAEhfUIPArrangeJunction Use Case</h3>
<p>CAAEhfUIPArrangeJunction.m is a use case of the CAAElecFlatteningItf.edu
framework that illustrates the CATIA EHF Interfaces framework capabilities.</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="What"></a>What Does CAAEhfUIPArrangeJunction Do?</h4>
<p>The goal of CAAEhfUIPArrangeJunction use case is to show how to arrange 
junctions.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p align="right">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="How"></a>How to Launch CAAEhfUIPArrangeJunction ?</h4>
<p>To launch CAAEhfUIPArrangeJunction , you will need to set up the build time
environment, then compile CAAEhfUIPArrangeJunction along with its
prerequisites, set up the run time environment, and then execute the sample.</p>
<p>To launch the use case, execute the following command:</p>
<pre>mkrun</pre>
<pre>Open Extr_Flat.CATProduct</pre>
<ul>
  <li><b>T</b>he path to the existing external CATProduct to
    be browsed. You may reference the supplied CATProduct document called
    &quot;Extr_Flat.CATProduct&quot; found in the
    'WS'/'OS'/resources/graphic/ModelArrangeJunction directory if under
    Unix. In this case, 'OS' can be any of the following:
    <ul>
      <li>aix_a for IBM</li>
      <li>hpux_a for HP</li>
      <li>solaris_a for SUN</li>
    </ul>
    <p>Under Windows, the path would indicate:
    'WS'\intel_a\resources\graphic\ModelArrangeJunction directory.</li>
</ul>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Where">&nbsp;</a>Where to Find the CAAEhfUIPArrangeJunction Code</h4>
<p>The CAAEhfUIPArrangeJunction sample is made of a single class named 
CAAEhfUIPArrangeJunction&nbsp;located in the CAAEhfUIPArrangeJunction.m
module of the CAAElecFlatteningItf.edu framework:</p>
<table>
  <tr>
    <td>Windows</td>
    <td><code>InstallRootDirectory\CAAElecFlatteningItf.edu\CAAEhfUIPArrangeJunction.m\</code></td>
  </tr>
  <tr>
    <td>Unix</td>
    <td><code>InstallRootDirectory/CAAElecFlatteningItf.edu/CAAEhfUIPArrangeJunction.m/</code></td>
  </tr>
</table>
<p>where <code>InstallRootDirectory</code> is the directory where the CAA CD-ROM
is installed.</p>
<p>&nbsp;</p>
<p>This sample deals with the following classes:</p>
<p>&nbsp;</p>
<table width="708" height="387">
  <tr>
    <td width="218" height="21"><i>CATMathVector</i></td>
    <td width="479" height="21">Class representing a mathematical vector in 3D</td>
  </tr>
  <tr>
    <td width="218" height="21"><i>CATMathLine</i></td>
    <td width="479" height="21">Class representing a mathematical line in 3D</td>
  </tr>
  <tr>
    <td width="218" height="21"><i>CATMathTransformation</i></td>
    <td width="479" height="21">Class representing a mathematical transformation 
	in 3D</td>
  </tr>
  <tr>
    <td width="218" height="21"><i>CATMathPoint</i></td>
    <td width="479" height="21">Class representing a mathematical point in 3D</td>
  </tr>
  </table>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="right">&nbsp;</p>
<!---------------------------------comment------------------------------------->
<h3><a name="Step"></a>Step-by-Step</h3>
<p>------------------------------------------</p>
<p>We will now comment all the steps. There are 10 logical steps 
:</p>
<table width="100%">
  <tr>
    <td><b>#</b></td>
    <td><b>Step</b></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step1">1</a></td>
    <td valign="top"><a href="#Step1">Check the input data</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step2">2</a></td>
    <td valign="top"><a href="#Step2">Get the normal vector and the origin of 
	the flattening plane</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step4">3</a></td>
    <td valign="top"><a href="#Step4">Get the rotation axis</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step3">4</a></td>
    <td valign="top"><a href="#Step3">The first vector is the reference vector 
	of the fixed branch</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step12">5</a></td>
    <td valign="top"><a href="#Step12">Empty the List Of Directions</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step13">6</a></td>
    <td valign="top"><a href="#Step13">Fill with pRefVector</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step7">7</a></td>
    <td valign="top"><a href="#Step7">For all other vectors, a rotation of 15 
	degrees is computed - Get the transformation</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step15">8</a></td>
    <td valign="top"><a href="#Step15">Retrieve the new vector rotated</a></td>
  </tr>
	<tr>
    <td valign="top"><a href="#Step16">9</a></td>
    <td valign="top"><a href="#Step16">Append the new vector rotated</a></td>
  </tr>
  <tr>
    <td valign="top"><a href="#Step17">10</a></td>
    <td valign="top"><a href="#Step17">Delete the pointer on the transformation</a></td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Step1"></a>Check the input data.</h4>
<p>&nbsp;</p>
<table class="code">
  <tr>
    <td>
      <pre>...
if (( 2 &gt; NbVectors ) || ( 2 &gt; NbExtremities ))
{ 
retCode = E_FAIL; 
goto EscapeWay;
}
...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Step2"></a>Get the normal vector and the origin of the flattening 
plane.</h4>
<table class="code">
  <tr>
    <td>
      <pre>...
iFlatteningPlane.GetNormal(Normal);
iFlatteningPlane.GetOrigin(Origin);
...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Step4"></a>Get the rotation axis.</h4>
<table class="code">
  <tr>
    <td>
      <pre>....
pRotationAxis = new CATMathLine(Origin,Normal);
if (NULL == pRotationAxis)
{
retCode = E_FAIL; 
goto EscapeWay;
}
....</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<p>&nbsp;</p>
<p align="right">&nbsp;</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Step3"></a>The first vector is the reference vector of the fixed 
branch.</h4>
<table class="code" id="table7">
  <tr>
    <td>
      <pre>....
RefVector = *(ioListOfDirections[1]);</pre>
      <pre>....</pre>
    </td>
  </tr>
</table>
<p align="right">&nbsp;</p>
<p align="right">&nbsp;</p>
<h4><a name="Step12"></a>Empty the List Of Directions.</h4>
<p>&nbsp;</p>
<table class="code" id="table5">
  <tr>
    <td>
      <pre>....
for (Index = 1; Index &lt;= NbVectors; Index++)
{
delete ioListOfDirections[Index];
ioListOfDirections[Index] = NULL;
}

ioListOfDirections.RemoveAll();</pre>
      <pre>....</pre>
    </td>
  </tr>
</table>
<p>&nbsp;</p>
<p align="right">&nbsp;</p>
<h4><a name="Step13"></a>Fill with pRefVector</h4>
<p>&nbsp;</p>
<table class="code" id="table6">
  <tr>
    <td>
      <pre>....
pVector = new CATMathVector(RefVector);
if (NULL == pVector)
{
retCode = E_FAIL; 
goto EscapeWay;
}
ioListOfDirections.Append(pVector) ;
pVector = NULL;</pre>
		<pre>....</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<!---------------------------------comment------------------------------------->
<h4><a name="Step7"></a>For all other vectors, a rotation of 15 degrees is 
computed - Get the transformation .</h4>
<table class="code">
  <tr>
    <td>
      <pre> ...</pre>
      <pre>Angle = 15 * (Index-1);


//Convert into Radians, because, CATMathTransfo need Radian
Angle = Angle * CATDegreeToRadian ;
pRotation = new CATMathTransformation(Angle, *pRotationAxis) ;
if (NULL == pRotation)
{
retCode = E_FAIL; 
goto EscapeWay;
}</pre>
		<pre>
 ...</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="right">&nbsp;</p>
<h4><a name="Step15"></a>Retrieve the new vector rotated</h4>
<p>&nbsp;</p>
<table class="code" id="table9">
  <tr>
    <td>
      <pre>....
pVector = new CATMathVector ((*pRotation) * RefVector);
if (NULL == pVector)
{
retCode = E_FAIL; 
goto EscapeWay;
}
pVector-&gt;Normalize() ;
</pre>
		<pre>....</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="right">&nbsp;</p>
<h4><a name="Step16"></a>Append the new vector rotated.</h4>
<p>&nbsp;</p>
<table class="code" id="table10">
  <tr>
    <td>
      <pre>....
ioListOfDirections.Append(pVector) ;
</pre>
		<pre>....</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<p align="right">&nbsp;</p>
<h4><a name="Step17"></a>Delete the pointer on the transformation</h4>
<p>&nbsp;</p>
<table class="code" id="table11">
  <tr>
    <td>
      <pre>....

delete pRotation;
pRotation = NULL;</pre>
		<pre>....</pre>
    </td>
  </tr>
</table>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->
<h3><a name="InShort"></a>In Short</h3>
<p>This use case has demonstrated the way to arrange junctions.&nbsp;</p>
<p align="right">[<a href="#Top">Top</a>]</p>
<hr>
<!---------------------------------comment------------------------------------->
<!---------------------------------comment------------------------------------->
<h3><a name="history"></a>History</h3>
<table width="100%">
  <tr>
    <td valign="top">Version: <strong>1</strong> [January 2007]</td>
    <td valign="top">Document Created</td>
  </tr>
  <tr>
    <td valign="top" align="right" colspan="2">[<a href="#Top">Top</a>]</td>
  </tr>
</table>
<hr>
<!---------------------------------comment------------------------------------->
<p><i>Copyright © 2007, Dassault Systèmes. All rights reserved.</i></p>

</body>

</html>
